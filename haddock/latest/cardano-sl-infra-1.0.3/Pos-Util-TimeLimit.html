<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Pos.Util.TimeLimit</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Pos-Util-TimeLimit.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Pos.Util.TimeLimit.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-sl-infra-1.0.3: Cardano SL - infrastructural</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Pos.Util.TimeLimit</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">TimeWarp helpers</a></li></ul></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:execWithTimeLimit">execWithTimeLimit</a> :: (Mockable Async m, Mockable Delay m) =&gt; Microsecond -&gt; m a -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a)</li><li class="src short"><span class="keyword">type</span> <a href="#t:CanLogInParallel">CanLogInParallel</a> m = (Mockable Delay m, Mockable Async m, WithLogger m, <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m)</li><li class="src short"><span class="keyword">data</span> <a href="#t:WaitingDelta">WaitingDelta</a><ul class="subs"><li>= <a href="#v:WaitOnce">WaitOnce</a> Second</li><li>| <a href="#v:WaitLinear">WaitLinear</a> Second</li><li>| <a href="#v:WaitGeometric">WaitGeometric</a> Microsecond <a href="../base-4.9.1.0/Prelude.html#t:Double">Double</a></li></ul></li><li class="src short"><a href="#v:logWarningLongAction">logWarningLongAction</a> :: <span class="keyword">forall</span> m a. <a href="Pos-Util-TimeLimit.html#t:CanLogInParallel">CanLogInParallel</a> m =&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Pos-Util-TimeLimit.html#t:WaitingDelta">WaitingDelta</a> -&gt; Text -&gt; m a -&gt; m a</li><li class="src short"><a href="#v:logWarningWaitOnce">logWarningWaitOnce</a> :: <a href="Pos-Util-TimeLimit.html#t:CanLogInParallel">CanLogInParallel</a> m =&gt; Second -&gt; Text -&gt; m a -&gt; m a</li><li class="src short"><a href="#v:logWarningWaitLinear">logWarningWaitLinear</a> :: <a href="Pos-Util-TimeLimit.html#t:CanLogInParallel">CanLogInParallel</a> m =&gt; Second -&gt; Text -&gt; m a -&gt; m a</li><li class="src short"><a href="#v:logWarningSWaitLinear">logWarningSWaitLinear</a> :: <a href="Pos-Util-TimeLimit.html#t:CanLogInParallel">CanLogInParallel</a> m =&gt; Second -&gt; Text -&gt; m a -&gt; m a</li><li class="src short"><a href="#v:logWarningWaitInf">logWarningWaitInf</a> :: <a href="Pos-Util-TimeLimit.html#t:CanLogInParallel">CanLogInParallel</a> m =&gt; Second -&gt; Text -&gt; m a -&gt; m a</li><li class="src short"><a href="#v:runWithRandomIntervals-39-">runWithRandomIntervals'</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, Mockable Delay m) =&gt; Microsecond -&gt; Microsecond -&gt; m () -&gt; m ()</li><li class="src short"><a href="#v:waitRandomInterval-39-">waitRandomInterval'</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, Mockable Delay m) =&gt; Microsecond -&gt; Microsecond -&gt; m ()</li><li class="src short"><a href="#v:runWithRandomIntervals">runWithRandomIntervals</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, WithLogger m, Mockable Delay m) =&gt; Microsecond -&gt; Microsecond -&gt; m () -&gt; m ()</li><li class="src short"><a href="#v:runWithRandomIntervalsNow">runWithRandomIntervalsNow</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, WithLogger m, Mockable Delay m) =&gt; Microsecond -&gt; Microsecond -&gt; m () -&gt; m ()</li><li class="src short"><a href="#v:waitRandomInterval">waitRandomInterval</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, Mockable Delay m) =&gt; Microsecond -&gt; Microsecond -&gt; m ()</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:execWithTimeLimit" class="def">execWithTimeLimit</a> :: (Mockable Async m, Mockable Delay m) =&gt; Microsecond -&gt; m a -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a) <a href="src/Pos.Util.TimeLimit.html#execWithTimeLimit" class="link">Source</a> <a href="#v:execWithTimeLimit" class="selflink">#</a></p></div><h1 id="g:1">TimeWarp helpers</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:CanLogInParallel" class="def">CanLogInParallel</a> m = (Mockable Delay m, Mockable Async m, WithLogger m, <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) <a href="src/Pos.Util.TimeLimit.html#CanLogInParallel" class="link">Source</a> <a href="#t:CanLogInParallel" class="selflink">#</a></p><div class="doc"><p>Constraint for something that can be logged in parallel with other action.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:WaitingDelta" class="def">WaitingDelta</a> <a href="src/Pos.Util.TimeLimit.html#WaitingDelta" class="link">Source</a> <a href="#t:WaitingDelta" class="selflink">#</a></p><div class="doc"><p>Data type to represent waiting strategy for printing warnings
 if action take too much time.</p><dl><dt>LW-4</dt><dd>this probably will be moved somewhere from here</dd></dl></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:WaitOnce" class="def">WaitOnce</a> Second</td><td class="doc"><p>wait s seconds and stop execution</p></td></tr><tr><td class="src"><a id="v:WaitLinear" class="def">WaitLinear</a> Second</td><td class="doc"><p>wait s, s * 2, s * 3  , s * 4  , ...      seconds</p></td></tr><tr><td class="src"><a id="v:WaitGeometric" class="def">WaitGeometric</a> Microsecond <a href="../base-4.9.1.0/Prelude.html#t:Double">Double</a></td><td class="doc"><p>wait m, m * q, m * q^2, m * q^3, ... microseconds</p></td></tr></table></div><div class="subs instances"><p id="control.i:WaitingDelta" class="caption collapser" onclick="toggleSection('i:WaitingDelta')">Instances</p><div id="section.i:WaitingDelta" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:WaitingDelta:Show:1" class="instance expander" onclick="toggleSection('i:id:WaitingDelta:Show:1')"></span> <a href="../base-4.9.1.0/Text-Show.html#t:Show">Show</a> <a href="Pos-Util-TimeLimit.html#t:WaitingDelta">WaitingDelta</a></span> <a href="src/Pos.Util.TimeLimit.html#line-39" class="link">Source</a> <a href="#t:WaitingDelta" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:WaitingDelta:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Pos-Util-TimeLimit.html#t:WaitingDelta">WaitingDelta</a> -&gt; <a href="../base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Pos-Util-TimeLimit.html#t:WaitingDelta">WaitingDelta</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Pos-Util-TimeLimit.html#t:WaitingDelta">WaitingDelta</a>] -&gt; <a href="../base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:logWarningLongAction" class="def">logWarningLongAction</a> :: <span class="keyword">forall</span> m a. <a href="Pos-Util-TimeLimit.html#t:CanLogInParallel">CanLogInParallel</a> m =&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Pos-Util-TimeLimit.html#t:WaitingDelta">WaitingDelta</a> -&gt; Text -&gt; m a -&gt; m a <a href="src/Pos.Util.TimeLimit.html#logWarningLongAction" class="link">Source</a> <a href="#v:logWarningLongAction" class="selflink">#</a></p><div class="doc"><p>Run action and print warning if it takes more time than expected.</p></div></div><div class="top"><p class="src"><a id="v:logWarningWaitOnce" class="def">logWarningWaitOnce</a> :: <a href="Pos-Util-TimeLimit.html#t:CanLogInParallel">CanLogInParallel</a> m =&gt; Second -&gt; Text -&gt; m a -&gt; m a <a href="src/Pos.Util.TimeLimit.html#logWarningWaitOnce" class="link">Source</a> <a href="#v:logWarningWaitOnce" class="selflink">#</a></p><div class="doc"><p>Specialization of <code><a href="Pos-Util-TimeLimit.html#v:logWarningLongAction">logWarningLongAction</a></code> with <code><a href="Pos-Util-TimeLimit.html#v:WaitOnce">WaitOnce</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:logWarningWaitLinear" class="def">logWarningWaitLinear</a> :: <a href="Pos-Util-TimeLimit.html#t:CanLogInParallel">CanLogInParallel</a> m =&gt; Second -&gt; Text -&gt; m a -&gt; m a <a href="src/Pos.Util.TimeLimit.html#logWarningWaitLinear" class="link">Source</a> <a href="#v:logWarningWaitLinear" class="selflink">#</a></p><div class="doc"><p>Specialization of <code><a href="Pos-Util-TimeLimit.html#v:logWarningLongAction">logWarningLongAction</a></code> with <code>WaiLinear</code>.</p></div></div><div class="top"><p class="src"><a id="v:logWarningSWaitLinear" class="def">logWarningSWaitLinear</a> :: <a href="Pos-Util-TimeLimit.html#t:CanLogInParallel">CanLogInParallel</a> m =&gt; Second -&gt; Text -&gt; m a -&gt; m a <a href="src/Pos.Util.TimeLimit.html#logWarningSWaitLinear" class="link">Source</a> <a href="#v:logWarningSWaitLinear" class="selflink">#</a></p><div class="doc"><p>Secure version of <code><a href="Pos-Util-TimeLimit.html#v:logWarningWaitLinear">logWarningWaitLinear</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:logWarningWaitInf" class="def">logWarningWaitInf</a> :: <a href="Pos-Util-TimeLimit.html#t:CanLogInParallel">CanLogInParallel</a> m =&gt; Second -&gt; Text -&gt; m a -&gt; m a <a href="src/Pos.Util.TimeLimit.html#logWarningWaitInf" class="link">Source</a> <a href="#v:logWarningWaitInf" class="selflink">#</a></p><div class="doc"><p>Specialization of <code><a href="Pos-Util-TimeLimit.html#v:logWarningLongAction">logWarningLongAction</a></code> with <code><a href="Pos-Util-TimeLimit.html#v:WaitGeometric">WaitGeometric</a></code>
 with parameter <code>1.3</code>. Accepts <code>Second</code>.</p></div></div><div class="top"><p class="src"><a id="v:runWithRandomIntervals-39-" class="def">runWithRandomIntervals'</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, Mockable Delay m) =&gt; Microsecond -&gt; Microsecond -&gt; m () -&gt; m () <a href="src/Pos.Util.TimeLimit.html#runWithRandomIntervals%27" class="link">Source</a> <a href="#v:runWithRandomIntervals-39-" class="selflink">#</a></p><div class="doc"><p>Wait random interval and then perform given action.</p></div></div><div class="top"><p class="src"><a id="v:waitRandomInterval-39-" class="def">waitRandomInterval'</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, Mockable Delay m) =&gt; Microsecond -&gt; Microsecond -&gt; m () <a href="src/Pos.Util.TimeLimit.html#waitRandomInterval%27" class="link">Source</a> <a href="#v:waitRandomInterval-39-" class="selflink">#</a></p><div class="doc"><p>Wait random number of <code>Microsecond'</code>s between min and max.</p></div></div><div class="top"><p class="src"><a id="v:runWithRandomIntervals" class="def">runWithRandomIntervals</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, WithLogger m, Mockable Delay m) =&gt; Microsecond -&gt; Microsecond -&gt; m () -&gt; m () <a href="src/Pos.Util.TimeLimit.html#runWithRandomIntervals" class="link">Source</a> <a href="#v:runWithRandomIntervals" class="selflink">#</a></p><div class="doc"><p>Wait random interval and then perform given action.</p></div></div><div class="top"><p class="src"><a id="v:runWithRandomIntervalsNow" class="def">runWithRandomIntervalsNow</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, WithLogger m, Mockable Delay m) =&gt; Microsecond -&gt; Microsecond -&gt; m () -&gt; m () <a href="src/Pos.Util.TimeLimit.html#runWithRandomIntervalsNow" class="link">Source</a> <a href="#v:runWithRandomIntervalsNow" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Pos-Util-TimeLimit.html#v:runWithRandomIntervals">runWithRandomIntervals</a></code>, but performs action immidiatelly
 at first time.</p></div></div><div class="top"><p class="src"><a id="v:waitRandomInterval" class="def">waitRandomInterval</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, Mockable Delay m) =&gt; Microsecond -&gt; Microsecond -&gt; m () <a href="src/Pos.Util.TimeLimit.html#waitRandomInterval" class="link">Source</a> <a href="#v:waitRandomInterval" class="selflink">#</a></p><div class="doc"><p>Wait random number of <code>Microsecond'</code>s between min and max.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>