<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Pos.Update.Poll.Logic.Base</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Pos-Update-Poll-Logic-Base.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Pos.Update.Poll.Logic.Base.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-sl-update-1.0.3: Cardano SL - update</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Pos.Update.Poll.Logic.Base</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Base operations in Poll.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">newtype</span> <a href="#t:TotalPositive">TotalPositive</a> = <a href="#v:TotalPositive">TotalPositive</a> <a href="../base-4.9.1.0/Prelude.html#t:Integer">Integer</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:TotalNegative">TotalNegative</a> = <a href="#v:TotalNegative">TotalNegative</a> <a href="../base-4.9.1.0/Prelude.html#t:Integer">Integer</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:TotalSum">TotalSum</a> = <a href="#v:TotalSum">TotalSum</a> <a href="../base-4.9.1.0/Prelude.html#t:Integer">Integer</a></li><li class="src short"><a href="#v:mkTotPositive">mkTotPositive</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; <a href="Pos-Update-Poll-Logic-Base.html#t:TotalPositive">TotalPositive</a></li><li class="src short"><a href="#v:mkTotNegative">mkTotNegative</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; <a href="Pos-Update-Poll-Logic-Base.html#t:TotalNegative">TotalNegative</a></li><li class="src short"><a href="#v:mkTotSum">mkTotSum</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; <a href="Pos-Update-Poll-Logic-Base.html#t:TotalSum">TotalSum</a></li><li class="src short"><a href="#v:adoptBlockVersion">adoptBlockVersion</a> :: <a href="Pos-Update-Poll-Class.html#t:MonadPoll">MonadPoll</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a> -&gt; m ()</li><li class="src short"><a href="#v:canBeAdoptedBV">canBeAdoptedBV</a> :: <a href="Pos-Update-Poll-Class.html#t:MonadPollRead">MonadPollRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:canBeProposedBV">canBeProposedBV</a> :: <a href="Pos-Update-Poll-Class.html#t:MonadPollRead">MonadPollRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:canCreateBlockBV">canCreateBlockBV</a> :: <a href="Pos-Update-Poll-Class.html#t:MonadPollRead">MonadPollRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:isConfirmedBV">isConfirmedBV</a> :: <a href="Pos-Update-Poll-Class.html#t:MonadPollRead">MonadPollRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:confirmBlockVersion">confirmBlockVersion</a> :: <a href="Pos-Update-Poll-Class.html#t:MonadPoll">MonadPoll</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a> -&gt; m ()</li><li class="src short"><a href="#v:updateSlottingData">updateSlottingData</a> :: (<a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>, MonadError <a href="Pos-Update-Poll-Failure.html#t:PollVerFailure">PollVerFailure</a> m, <a href="Pos-Update-Poll-Class.html#t:MonadPoll">MonadPoll</a> m) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m ()</li><li class="src short"><a href="#v:verifyNextBVMod">verifyNextBVMod</a> :: MonadError <a href="Pos-Update-Poll-Failure.html#t:PollVerFailure">PollVerFailure</a> m =&gt; <a href="Pos-Update-Core-Types.html#t:UpId">UpId</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="Pos-Update-Core-Types.html#t:BlockVersionData">BlockVersionData</a> -&gt; <a href="Pos-Update-Core-Types.html#t:BlockVersionModifier">BlockVersionModifier</a> -&gt; m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:CurEpoch">CurEpoch</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ConfirmedEpoch">ConfirmedEpoch</a></li><li class="src short"><a href="#v:calcSoftforkThreshold">calcSoftforkThreshold</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:SoftforkRule">SoftforkRule</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; Tagged <a href="Pos-Update-Poll-Logic-Base.html#t:CurEpoch">CurEpoch</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; Tagged <a href="Pos-Update-Poll-Logic-Base.html#t:ConfirmedEpoch">ConfirmedEpoch</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a></li><li class="src short"><a href="#v:isDecided">isDecided</a> :: <a href="Pos-Update-Poll-Logic-Base.html#t:TotalPositive">TotalPositive</a> -&gt; <a href="Pos-Update-Poll-Logic-Base.html#t:TotalNegative">TotalNegative</a> -&gt; <a href="Pos-Update-Poll-Logic-Base.html#t:TotalSum">TotalSum</a> -&gt; <a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:voteToUProposalState">voteToUProposalState</a> :: (<a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>, MonadError <a href="Pos-Update-Poll-Failure.html#t:PollVerFailure">PollVerFailure</a> m, WithLogger m) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Pos-Update-Poll-Types.html#t:UndecidedProposalState">UndecidedProposalState</a> -&gt; m <a href="Pos-Update-Poll-Types.html#t:UndecidedProposalState">UndecidedProposalState</a></li><li class="src short"><a href="#v:putNewProposal">putNewProposal</a> :: (<a href="Pos-Update-Poll-Class.html#t:MonadPoll">MonadPoll</a> m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Class.html#t:IsMainHeader">IsMainHeader</a> mainHeader) =&gt; <a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:SlotId">SlotId</a> mainHeader -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; [(<a href="Pos-Update-Core-Types.html#t:UpdateVote">UpdateVote</a>, <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a>)] -&gt; <a href="Pos-Update-Core-Types.html#t:UpdateProposal">UpdateProposal</a> -&gt; m ()</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:TotalPositive" class="def">TotalPositive</a> <a href="src/Pos.Update.Poll.Logic.Base.html#TotalPositive" class="link">Source</a> <a href="#t:TotalPositive" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TotalPositive" class="def">TotalPositive</a> <a href="../base-4.9.1.0/Prelude.html#t:Integer">Integer</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:TotalNegative" class="def">TotalNegative</a> <a href="src/Pos.Update.Poll.Logic.Base.html#TotalNegative" class="link">Source</a> <a href="#t:TotalNegative" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TotalNegative" class="def">TotalNegative</a> <a href="../base-4.9.1.0/Prelude.html#t:Integer">Integer</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:TotalSum" class="def">TotalSum</a> <a href="src/Pos.Update.Poll.Logic.Base.html#TotalSum" class="link">Source</a> <a href="#t:TotalSum" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TotalSum" class="def">TotalSum</a> <a href="../base-4.9.1.0/Prelude.html#t:Integer">Integer</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:mkTotPositive" class="def">mkTotPositive</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; <a href="Pos-Update-Poll-Logic-Base.html#t:TotalPositive">TotalPositive</a> <a href="src/Pos.Update.Poll.Logic.Base.html#mkTotPositive" class="link">Source</a> <a href="#v:mkTotPositive" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkTotNegative" class="def">mkTotNegative</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; <a href="Pos-Update-Poll-Logic-Base.html#t:TotalNegative">TotalNegative</a> <a href="src/Pos.Update.Poll.Logic.Base.html#mkTotNegative" class="link">Source</a> <a href="#v:mkTotNegative" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkTotSum" class="def">mkTotSum</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; <a href="Pos-Update-Poll-Logic-Base.html#t:TotalSum">TotalSum</a> <a href="src/Pos.Update.Poll.Logic.Base.html#mkTotSum" class="link">Source</a> <a href="#v:mkTotSum" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:adoptBlockVersion" class="def">adoptBlockVersion</a> :: <a href="Pos-Update-Poll-Class.html#t:MonadPoll">MonadPoll</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a> -&gt; m () <a href="src/Pos.Update.Poll.Logic.Base.html#adoptBlockVersion" class="link">Source</a> <a href="#v:adoptBlockVersion" class="selflink">#</a></p><div class="doc"><p>Adopt given block version. When it happens, last adopted block
 version is changed.</p><p>Apart from that, <code><a href="Pos-Update-Poll-Types.html#t:ConfirmedProposalState">ConfirmedProposalState</a></code> of proposals with this
 block version are updated.</p></div></div><div class="top"><p class="src"><a id="v:canBeAdoptedBV" class="def">canBeAdoptedBV</a> :: <a href="Pos-Update-Poll-Class.html#t:MonadPollRead">MonadPollRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Pos.Update.Poll.Logic.Base.html#canBeAdoptedBV" class="link">Source</a> <a href="#v:canBeAdoptedBV" class="selflink">#</a></p><div class="doc"><p>Check whether given <code><a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a></code> can be adopted according to
 current Poll.</p><p>Specifically, the following rules regarding major and minor versions
 take place:
 1. If major version is less than last adopted one, it can't be adopted.
 2. If major version is more than '1' greater than last adopted one,
 it can't be adopted as well.
 3. If major version is greater than last adopted one by '1', then minor
 version must be '0'.
 4. If major version is equal to the last adopted one, then minor version
 can be greather than minor component of last adopted version by 1.</p></div></div><div class="top"><p class="src"><a id="v:canBeProposedBV" class="def">canBeProposedBV</a> :: <a href="Pos-Update-Poll-Class.html#t:MonadPollRead">MonadPollRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Pos.Update.Poll.Logic.Base.html#canBeProposedBV" class="link">Source</a> <a href="#v:canBeProposedBV" class="selflink">#</a></p><div class="doc"><p>Check whether given <code><a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a></code> can be proposed according to
 current Poll.</p><p>Specifically, the following rules regarding major and minor versions
 take place:
 1. If major version is less than last adopted one, it can't be proposed.
 2. If major version is more than '1' greater than last adopted one,
 it can't be proposed as well.
 3. If major version is greater than last adopted one by '1', then minor
 version must be '0'.
 4. If major version is equal to the last adopted one, then minor version
 can be either same as the last adopted one or greater by '1'.
 Rules regarding alternative version are as follows (assuming
 checks above pass):
 1. If '(Major, Minor)' of given version is equal to '(Major, Minor)' of
 last adopted version, then alternative version must be equal to
 alternative version of last adopted version.
 2. Otherwise '(Major, Minor)' of given version is lexicographically greater
 than or equal to '(Major, Minor)' of last adopted version and in this case
 other proposed block versions with same '(Major, Minor)' are considered
 (let's call this set <code>X</code>).
 If <code>X</code> is empty, given alternative version must be 0.
 Otherwise it must be in <code>X</code> or greater than maximum from <code>X</code> by one.</p></div></div><div class="top"><p class="src"><a id="v:canCreateBlockBV" class="def">canCreateBlockBV</a> :: <a href="Pos-Update-Poll-Class.html#t:MonadPollRead">MonadPollRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Pos.Update.Poll.Logic.Base.html#canCreateBlockBV" class="link">Source</a> <a href="#v:canCreateBlockBV" class="selflink">#</a></p><div class="doc"><p>Check whether block with given <code><a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a></code> can be created
 according to current Poll.</p><p>Specifically, one of the following conditions must be true.
 &#8226; Given block version is equal to last adopted block version.
 &#8226; '(major, minor)' of given block version is greater than
 '(major, minor)' of adopted block version and this block version
 is confirmed.</p></div></div><div class="top"><p class="src"><a id="v:isConfirmedBV" class="def">isConfirmedBV</a> :: <a href="Pos-Update-Poll-Class.html#t:MonadPollRead">MonadPollRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Pos.Update.Poll.Logic.Base.html#isConfirmedBV" class="link">Source</a> <a href="#v:isConfirmedBV" class="selflink">#</a></p><div class="doc"><p>Check whether BlockVersion is confirmed.</p></div></div><div class="top"><p class="src"><a id="v:confirmBlockVersion" class="def">confirmBlockVersion</a> :: <a href="Pos-Update-Poll-Class.html#t:MonadPoll">MonadPoll</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a> -&gt; m () <a href="src/Pos.Update.Poll.Logic.Base.html#confirmBlockVersion" class="link">Source</a> <a href="#v:confirmBlockVersion" class="selflink">#</a></p><div class="doc"><p>Mark given <code><a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a></code> as confirmed if it is known. This
 function also takes epoch when proposal was confirmed.</p></div></div><div class="top"><p class="src"><a id="v:updateSlottingData" class="def">updateSlottingData</a> :: (<a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>, MonadError <a href="Pos-Update-Poll-Failure.html#t:PollVerFailure">PollVerFailure</a> m, <a href="Pos-Update-Poll-Class.html#t:MonadPoll">MonadPoll</a> m) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m () <a href="src/Pos.Update.Poll.Logic.Base.html#updateSlottingData" class="link">Source</a> <a href="#v:updateSlottingData" class="selflink">#</a></p><div class="doc"><p>Update slotting data stored in poll. First argument is epoch for
 which currently adopted <code><a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersion">BlockVersion</a></code> can be applied. Here we update the
 <code>SlottingData</code> from the update. We can recieve updated epoch <code>SlottingData</code>
 and from it, changed epoch/slot times, which is important to keep track of.</p></div></div><div class="top"><p class="src"><a id="v:verifyNextBVMod" class="def">verifyNextBVMod</a> :: MonadError <a href="Pos-Update-Poll-Failure.html#t:PollVerFailure">PollVerFailure</a> m =&gt; <a href="Pos-Update-Core-Types.html#t:UpId">UpId</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="Pos-Update-Core-Types.html#t:BlockVersionData">BlockVersionData</a> -&gt; <a href="Pos-Update-Core-Types.html#t:BlockVersionModifier">BlockVersionModifier</a> -&gt; m () <a href="src/Pos.Update.Poll.Logic.Base.html#verifyNextBVMod" class="link">Source</a> <a href="#v:verifyNextBVMod" class="selflink">#</a></p><div class="doc"><p>Verify that <code><a href="Pos-Update-Core-Types.html#t:BlockVersionModifier">BlockVersionModifier</a></code> passed as last argument can follow
 <code><a href="Pos-Update-Core-Types.html#t:BlockVersionData">BlockVersionData</a></code> passed as second argument. First argument
 (<code><a href="Pos-Update-Core-Types.html#t:UpId">UpId</a></code>) is used to create error only.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:CurEpoch" class="def">CurEpoch</a> <a href="src/Pos.Update.Poll.Logic.Base.html#CurEpoch" class="link">Source</a> <a href="#t:CurEpoch" class="selflink">#</a></p><div class="doc"><p>Dummy type for tagging used by <code><a href="Pos-Update-Poll-Logic-Base.html#v:calcSoftforkThreshold">calcSoftforkThreshold</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ConfirmedEpoch" class="def">ConfirmedEpoch</a> <a href="src/Pos.Update.Poll.Logic.Base.html#ConfirmedEpoch" class="link">Source</a> <a href="#t:ConfirmedEpoch" class="selflink">#</a></p><div class="doc"><p>Dummy type for tagging used by <code><a href="Pos-Update-Poll-Logic-Base.html#v:calcSoftforkThreshold">calcSoftforkThreshold</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:calcSoftforkThreshold" class="def">calcSoftforkThreshold</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:SoftforkRule">SoftforkRule</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; Tagged <a href="Pos-Update-Poll-Logic-Base.html#t:CurEpoch">CurEpoch</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; Tagged <a href="Pos-Update-Poll-Logic-Base.html#t:ConfirmedEpoch">ConfirmedEpoch</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> <a href="src/Pos.Update.Poll.Logic.Base.html#calcSoftforkThreshold" class="link">Source</a> <a href="#v:calcSoftforkThreshold" class="selflink">#</a></p><div class="doc"><p>Calculate how much stake issuers of blocks with some block
 version should have to make this version adopted.</p></div></div><div class="top"><p class="src"><a id="v:isDecided" class="def">isDecided</a> :: <a href="Pos-Update-Poll-Logic-Base.html#t:TotalPositive">TotalPositive</a> -&gt; <a href="Pos-Update-Poll-Logic-Base.html#t:TotalNegative">TotalNegative</a> -&gt; <a href="Pos-Update-Poll-Logic-Base.html#t:TotalSum">TotalSum</a> -&gt; <a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Pos.Update.Poll.Logic.Base.html#isDecided" class="link">Source</a> <a href="#v:isDecided" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:voteToUProposalState" class="def">voteToUProposalState</a> :: (<a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>, MonadError <a href="Pos-Update-Poll-Failure.html#t:PollVerFailure">PollVerFailure</a> m, WithLogger m) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Pos-Update-Poll-Types.html#t:UndecidedProposalState">UndecidedProposalState</a> -&gt; m <a href="Pos-Update-Poll-Types.html#t:UndecidedProposalState">UndecidedProposalState</a> <a href="src/Pos.Update.Poll.Logic.Base.html#voteToUProposalState" class="link">Source</a> <a href="#v:voteToUProposalState" class="selflink">#</a></p><div class="doc"><p>Apply vote to UndecidedProposalState, thus modifing mutable data,
 i. e. votes and stakes.</p></div></div><div class="top"><p class="src"><a id="v:putNewProposal" class="def">putNewProposal</a> :: (<a href="Pos-Update-Poll-Class.html#t:MonadPoll">MonadPoll</a> m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Class.html#t:IsMainHeader">IsMainHeader</a> mainHeader) =&gt; <a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:SlotId">SlotId</a> mainHeader -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> -&gt; [(<a href="Pos-Update-Core-Types.html#t:UpdateVote">UpdateVote</a>, <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a>)] -&gt; <a href="Pos-Update-Core-Types.html#t:UpdateProposal">UpdateProposal</a> -&gt; m () <a href="src/Pos.Update.Poll.Logic.Base.html#putNewProposal" class="link">Source</a> <a href="#v:putNewProposal" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>