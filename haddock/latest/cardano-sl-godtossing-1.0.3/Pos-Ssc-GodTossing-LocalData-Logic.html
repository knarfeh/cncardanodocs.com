<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Pos.Ssc.GodTossing.LocalData.Logic</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Pos-Ssc-GodTossing-LocalData-Logic.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Pos.Ssc.GodTossing.LocalData.Logic.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-sl-godtossing-1.0.3: Cardano SL - GodTossing implementation of SSC</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Pos.Ssc.GodTossing.LocalData.Logic</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">'Inv|Req|Data' processing.</a></li><li><a href="#g:2">Garbage collection worker</a></li><li><a href="#g:3">Instances</a><ul><li><a href="#g:4">instance SscLocalDataClass SscGodTossing</a></li></ul></li><li><a href="#section.orphans">Orphan instances</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module defines methods which operate on GtLocalData.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:sscIsDataUseful">sscIsDataUseful</a> :: (WithLogger m, <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="../cardano-sl-infra-1.0.3/Pos-Slotting-Class.html#t:MonadSlots">MonadSlots</a> ctx m, <a href="../cardano-sl-ssc-1.0.3/Pos-Ssc-Extra-Class.html#t:MonadSscMem">MonadSscMem</a> <a href="Pos-Ssc-GodTossing-Type.html#t:SscGodTossing">SscGodTossing</a> ctx m, MonadRandom m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>, <a href="Pos-Ssc-GodTossing-Configuration.html#t:HasGtConfiguration">HasGtConfiguration</a>) =&gt; <a href="Pos-Ssc-GodTossing-Toss-Types.html#t:GtTag">GtTag</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:sscProcessCommitment">sscProcessCommitment</a> :: <span class="keyword">forall</span> ctx m. GtDataProcessingMode ctx m =&gt; <a href="Pos-Ssc-GodTossing-Core-Types.html#t:SignedCommitment">SignedCommitment</a> -&gt; m ()</li><li class="src short"><a href="#v:sscProcessOpening">sscProcessOpening</a> :: GtDataProcessingMode ctx m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; <a href="Pos-Ssc-GodTossing-Core-Types.html#t:Opening">Opening</a> -&gt; m ()</li><li class="src short"><a href="#v:sscProcessShares">sscProcessShares</a> :: GtDataProcessingMode ctx m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; <a href="Pos-Ssc-GodTossing-Core-Types.html#t:InnerSharesMap">InnerSharesMap</a> -&gt; m ()</li><li class="src short"><a href="#v:sscProcessCertificate">sscProcessCertificate</a> :: GtDataProcessingMode ctx m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Vss-Types.html#t:VssCertificate">VssCertificate</a> -&gt; m ()</li><li class="src short"><a href="#v:localOnNewSlot">localOnNewSlot</a> :: <a href="../cardano-sl-ssc-1.0.3/Pos-Ssc-Extra-Class.html#t:MonadSscMem">MonadSscMem</a> <a href="Pos-Ssc-GodTossing-Type.html#t:SscGodTossing">SscGodTossing</a> ctx m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:SlotId">SlotId</a> -&gt; m ()</li></ul></div><div id="interface"><h1 id="g:1">'Inv|Req|Data' processing.</h1><div class="top"><p class="src"><a id="v:sscIsDataUseful" class="def">sscIsDataUseful</a> :: (WithLogger m, <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="../cardano-sl-infra-1.0.3/Pos-Slotting-Class.html#t:MonadSlots">MonadSlots</a> ctx m, <a href="../cardano-sl-ssc-1.0.3/Pos-Ssc-Extra-Class.html#t:MonadSscMem">MonadSscMem</a> <a href="Pos-Ssc-GodTossing-Type.html#t:SscGodTossing">SscGodTossing</a> ctx m, MonadRandom m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>, <a href="Pos-Ssc-GodTossing-Configuration.html#t:HasGtConfiguration">HasGtConfiguration</a>) =&gt; <a href="Pos-Ssc-GodTossing-Toss-Types.html#t:GtTag">GtTag</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Pos.Ssc.GodTossing.LocalData.Logic.html#sscIsDataUseful" class="link">Source</a> <a href="#v:sscIsDataUseful" class="selflink">#</a></p><div class="doc"><p>Check whether SSC data with given tag and public key can be added
 to current local data.</p></div></div><div class="top"><p class="src"><a id="v:sscProcessCommitment" class="def">sscProcessCommitment</a> :: <span class="keyword">forall</span> ctx m. GtDataProcessingMode ctx m =&gt; <a href="Pos-Ssc-GodTossing-Core-Types.html#t:SignedCommitment">SignedCommitment</a> -&gt; m () <a href="src/Pos.Ssc.GodTossing.LocalData.Logic.html#sscProcessCommitment" class="link">Source</a> <a href="#v:sscProcessCommitment" class="selflink">#</a></p><div class="doc"><p>Process <code><a href="Pos-Ssc-GodTossing-Core-Types.html#t:SignedCommitment">SignedCommitment</a></code> received from network, checking it against
 current state (global + local) and adding to local state if it's valid.</p></div></div><div class="top"><p class="src"><a id="v:sscProcessOpening" class="def">sscProcessOpening</a> :: GtDataProcessingMode ctx m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; <a href="Pos-Ssc-GodTossing-Core-Types.html#t:Opening">Opening</a> -&gt; m () <a href="src/Pos.Ssc.GodTossing.LocalData.Logic.html#sscProcessOpening" class="link">Source</a> <a href="#v:sscProcessOpening" class="selflink">#</a></p><div class="doc"><p>Process <code><a href="Pos-Ssc-GodTossing-Core-Types.html#t:Opening">Opening</a></code> received from network, checking it against
 current state (global + local) and adding to local state if it's valid.</p></div></div><div class="top"><p class="src"><a id="v:sscProcessShares" class="def">sscProcessShares</a> :: GtDataProcessingMode ctx m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; <a href="Pos-Ssc-GodTossing-Core-Types.html#t:InnerSharesMap">InnerSharesMap</a> -&gt; m () <a href="src/Pos.Ssc.GodTossing.LocalData.Logic.html#sscProcessShares" class="link">Source</a> <a href="#v:sscProcessShares" class="selflink">#</a></p><div class="doc"><p>Process <code><a href="Pos-Ssc-GodTossing-Core-Types.html#t:InnerSharesMap">InnerSharesMap</a></code> received from network, checking it against
 current state (global + local) and adding to local state if it's valid.</p></div></div><div class="top"><p class="src"><a id="v:sscProcessCertificate" class="def">sscProcessCertificate</a> :: GtDataProcessingMode ctx m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Vss-Types.html#t:VssCertificate">VssCertificate</a> -&gt; m () <a href="src/Pos.Ssc.GodTossing.LocalData.Logic.html#sscProcessCertificate" class="link">Source</a> <a href="#v:sscProcessCertificate" class="selflink">#</a></p><div class="doc"><p>Process <code><a href="../cardano-sl-core-1.0.3/Pos-Core-Vss-Types.html#t:VssCertificate">VssCertificate</a></code> received from network, checking it against
 current state (global + local) and adding to local state if it's valid.</p></div></div><h1 id="g:2">Garbage collection worker</h1><div class="top"><p class="src"><a id="v:localOnNewSlot" class="def">localOnNewSlot</a> :: <a href="../cardano-sl-ssc-1.0.3/Pos-Ssc-Extra-Class.html#t:MonadSscMem">MonadSscMem</a> <a href="Pos-Ssc-GodTossing-Type.html#t:SscGodTossing">SscGodTossing</a> ctx m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:SlotId">SlotId</a> -&gt; m () <a href="src/Pos.Ssc.GodTossing.LocalData.Logic.html#localOnNewSlot" class="link">Source</a> <a href="#v:localOnNewSlot" class="selflink">#</a></p><div class="doc"><p>Clean-up some data when new slot starts.
 This function is only needed for garbage collection, it doesn't affect
 validity of local data.
 Currently it does nothing, but maybe later we'll decide to do clean-up.</p></div></div><h1 id="g:3">Instances</h1><h2 id="g:4">instance SscLocalDataClass SscGodTossing</h2><h1>Orphan instances</h1><div id="section.orphans" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:o:ic:SscLocalDataClass:SscLocalDataClass:1" class="instance expander" onclick="toggleSection('i:o:ic:SscLocalDataClass:SscLocalDataClass:1')"></span> (<a href="Pos-Ssc-GodTossing-Configuration.html#t:HasGtConfiguration">HasGtConfiguration</a>, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>) =&gt; <a href="../cardano-sl-ssc-1.0.3/Pos-Ssc-Class-LocalData.html#t:SscLocalDataClass">SscLocalDataClass</a> <a href="Pos-Ssc-GodTossing-Type.html#t:SscGodTossing">SscGodTossing</a></span> <a href="src/Pos.Ssc.GodTossing.LocalData.Logic.html#line-71" class="link">Source</a> <a href="#v:-36-fSscLocalDataClassSscGodTossing" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:o:ic:SscLocalDataClass:SscLocalDataClass:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:sscGetLocalPayloadQ">sscGetLocalPayloadQ</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:SlotId">SlotId</a> -&gt; <a href="../cardano-sl-ssc-1.0.3/Pos-Ssc-Class-LocalData.html#t:LocalQuery">LocalQuery</a> <a href="Pos-Ssc-GodTossing-Type.html#t:SscGodTossing">SscGodTossing</a> (<a href="../cardano-sl-ssc-1.0.3/Pos-Ssc-Class-Types.html#t:SscPayload">SscPayload</a> <a href="Pos-Ssc-GodTossing-Type.html#t:SscGodTossing">SscGodTossing</a>) <a href="#v:sscGetLocalPayloadQ" class="selflink">#</a></p><p class="src"><a href="#v:sscNormalizeU">sscNormalizeU</a> :: (<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a>, <a href="../cardano-sl-lrc-1.0.3/Pos-Lrc-Types.html#t:RichmenStakes">RichmenStakes</a>) -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:BlockVersionData">BlockVersionData</a> -&gt; <a href="../cardano-sl-ssc-1.0.3/Pos-Ssc-Class-Types.html#t:SscGlobalState">SscGlobalState</a> <a href="Pos-Ssc-GodTossing-Type.html#t:SscGodTossing">SscGodTossing</a> -&gt; <a href="../cardano-sl-ssc-1.0.3/Pos-Ssc-Class-LocalData.html#t:LocalUpdate">LocalUpdate</a> <a href="Pos-Ssc-GodTossing-Type.html#t:SscGodTossing">SscGodTossing</a> () <a href="#v:sscNormalizeU" class="selflink">#</a></p><p class="src"><a href="#v:sscNewLocalData">sscNewLocalData</a> :: (<a href="../cardano-sl-infra-1.0.3/Pos-Slotting-Class.html#t:MonadSlots">MonadSlots</a> ctx m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m) =&gt; m (<a href="../cardano-sl-ssc-1.0.3/Pos-Ssc-Class-Types.html#t:SscLocalData">SscLocalData</a> <a href="Pos-Ssc-GodTossing-Type.html#t:SscGodTossing">SscGodTossing</a>) <a href="#v:sscNewLocalData" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>