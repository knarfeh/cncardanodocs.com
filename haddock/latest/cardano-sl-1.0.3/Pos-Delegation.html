<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Pos.Delegation</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Pos-Delegation.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Pos.Delegation.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-sl-1.0.3: Cardano SL main implementation</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Pos.Delegation</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Getters and predicates</a></li><li><a href="#g:2">Initialization</a></li><li><a href="#g:3">Batch ops</a></li><li><a href="#g:4">Iteration</a></li><li><a href="#g:5">Exceptions</a></li><li><a href="#g:6">Modifying memstate</a></li><li><a href="#g:7">Common helpers</a></li><li><a href="#g:8">Heavyweight psks handling &amp; mempool</a></li><li><a href="#g:9">Lightweight psks handling</a></li><li><a href="#g:10">Confirmations</a></li></ul></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">class</span> MonadThrow m =&gt; <a href="#t:MonadCedeRead">MonadCedeRead</a> m <span class="keyword">where</span><ul class="subs"></ul></li><li class="src short"><a href="#v:getPskPk">getPskPk</a> :: <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a> -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>)</li><li class="src short"><span class="keyword">class</span> <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> m =&gt; <a href="#t:MonadCede">MonadCede</a> m <span class="keyword">where</span><ul class="subs"></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:DBCede">DBCede</a> = <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:TaggedTrans">TaggedTrans</a> DBCedeTag IdentityT</li><li class="src short"><a href="#v:runDBCede">runDBCede</a> :: <a href="Pos-Delegation.html#t:DBCede">DBCede</a> m a -&gt; m a</li><li class="src short"><span class="keyword">type</span> <a href="#t:MapCede">MapCede</a> = LazyStateT' <a href="Pos-Delegation.html#t:CedeModifier">CedeModifier</a></li><li class="src short"><a href="#v:runMapCede">runMapCede</a> :: <a href="Pos-Delegation.html#t:CedeModifier">CedeModifier</a> -&gt; <a href="Pos-Delegation.html#t:MapCede">MapCede</a> m a -&gt; m (a, <a href="Pos-Delegation.html#t:CedeModifier">CedeModifier</a>)</li><li class="src short"><a href="#v:evalMapCede">evalMapCede</a> :: <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Pos-Delegation.html#t:CedeModifier">CedeModifier</a> -&gt; <a href="Pos-Delegation.html#t:MapCede">MapCede</a> m a -&gt; m a</li><li class="src short"><a href="#v:getPskChain">getPskChain</a> :: <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m <a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a></li><li class="src short"><a href="#v:getPskChainInternal">getPskChainInternal</a> :: <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> m =&gt; HashSet <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m <a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a></li><li class="src short"><a href="#v:detectCycleOnAddition">detectCycleOnAddition</a> :: <span class="keyword">forall</span> m. <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a> -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a>)</li><li class="src short"><a href="#v:dlgReachesIssuance">dlgReachesIssuance</a> :: <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:DlgEdgeAction">DlgEdgeAction</a><ul class="subs"><li>= <a href="#v:DlgEdgeAdd">DlgEdgeAdd</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a></li><li>| <a href="#v:DlgEdgeDel">DlgEdgeDel</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a></li></ul></li><li class="src short"><a href="#v:pskToDlgEdgeAction">pskToDlgEdgeAction</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a> -&gt; <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a></li><li class="src short"><a href="#v:dlgEdgeActionIssuer">dlgEdgeActionIssuer</a> :: <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:CedeModifier">CedeModifier</a> = HashMap <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:DlgMemPool">DlgMemPool</a> = HashMap <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:DelegationWrap">DelegationWrap</a> = <a href="#v:DelegationWrap">DelegationWrap</a> {<ul class="subs"><li><a href="#v:_dwMessageCache">_dwMessageCache</a> :: !(LRU (<a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>) <a href="../time-1.6.0.1/Data-Time-Clock.html#t:UTCTime">UTCTime</a>)</li><li><a href="#v:_dwConfirmationCache">_dwConfirmationCache</a> :: !(LRU <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> <a href="../time-1.6.0.1/Data-Time-Clock.html#t:UTCTime">UTCTime</a>)</li><li><a href="#v:_dwProxySKPool">_dwProxySKPool</a> :: !<a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a></li><li><a href="#v:_dwPoolSize">_dwPoolSize</a> :: !Byte</li><li><a href="#v:_dwTip">_dwTip</a> :: !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a></li></ul>}</li><li class="src short"><a href="#v:dwMessageCache">dwMessageCache</a> :: Lens' <a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a> (LRU (<a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>) <a href="../time-1.6.0.1/Data-Time-Clock.html#t:UTCTime">UTCTime</a>)</li><li class="src short"><a href="#v:dwConfirmationCache">dwConfirmationCache</a> :: Lens' <a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a> (LRU <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> <a href="../time-1.6.0.1/Data-Time-Clock.html#t:UTCTime">UTCTime</a>)</li><li class="src short"><a href="#v:dwProxySKPool">dwProxySKPool</a> :: Lens' <a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a> <a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a></li><li class="src short"><a href="#v:dwPoolSize">dwPoolSize</a> :: Lens' <a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a> Byte</li><li class="src short"><a href="#v:dwTip">dwTip</a> :: Lens' <a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:DelegationVar">DelegationVar</a> = <a href="../base-4.9.1.0/GHC-Conc.html#t:TVar">TVar</a> <a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:MonadDelegation">MonadDelegation</a> ctx m = (MonadReader ctx m, <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens">HasLens</a> <a href="Pos-Delegation.html#t:DelegationVar">DelegationVar</a> ctx <a href="Pos-Delegation.html#t:DelegationVar">DelegationVar</a>, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>)</li><li class="src short"><a href="#v:askDelegationState">askDelegationState</a> :: <a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m =&gt; m <a href="Pos-Delegation.html#t:DelegationVar">DelegationVar</a></li><li class="src short"><a href="#v:getPskByIssuer">getPskByIssuer</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; <a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>)</li><li class="src short"><a href="#v:isIssuerByAddressHash">isIssuerByAddressHash</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:getDlgTransitive">getDlgTransitive</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>)</li><li class="src short"><a href="#v:getDlgTransitiveReverse">getDlgTransitiveReverse</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m (HashSet <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>)</li><li class="src short"><a href="#v:isIssuerPostedThisEpoch">isIssuerPostedThisEpoch</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:initGStateDlg">initGStateDlg</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Genesis-Types.html#t:GenesisDelegation">GenesisDelegation</a> -&gt; m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:DelegationOp">DelegationOp</a><ul class="subs"><li>= <a href="#v:PskFromEdgeAction">PskFromEdgeAction</a> !<a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a></li><li>| <a href="#v:AddTransitiveDlg">AddTransitiveDlg</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a></li><li>| <a href="#v:DelTransitiveDlg">DelTransitiveDlg</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a></li><li>| <a href="#v:SetTransitiveDlgRev">SetTransitiveDlgRev</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> !(HashSet <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>)</li><li>| <a href="#v:AddPostedThisEpoch">AddPostedThisEpoch</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a></li><li>| <a href="#v:DelPostedThisEpoch">DelPostedThisEpoch</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:DlgTransRevIter">DlgTransRevIter</a></li><li class="src short"><a href="#v:getDelegators">getDelegators</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; Source (ResourceT m) (<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>, HashSet <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>)</li><li class="src short"><a href="#v:getThisEpochPostedKeys">getThisEpochPostedKeys</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; m (HashSet <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>)</li><li class="src short"><a href="#v:dlgVerifyPayload">dlgVerifyPayload</a> :: MonadError Text m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="Pos-Delegation-Types.html#t:DlgPayload">DlgPayload</a> -&gt; m ()</li><li class="src short"><a href="#v:isRevokePsk">isRevokePsk</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:ProxySecretKey">ProxySecretKey</a> w -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:dlgMemPoolApplyBlock">dlgMemPoolApplyBlock</a> :: <a href="Pos-Block-Core.html#t:MainBlock">MainBlock</a> ssc -&gt; <a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a> -&gt; <a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a></li><li class="src short"><a href="#v:delegationRelays">delegationRelays</a> :: <span class="keyword">forall</span> ssc ctx m. <a href="Pos-WorkMode-Class.html#t:WorkMode">WorkMode</a> ssc ctx m =&gt; [<a href="../cardano-sl-infra-1.0.3/Pos-Communication-Relay-Class.html#t:Relay">Relay</a> m]</li><li class="src short"><span class="keyword">data</span> <a href="#t:DelegationError">DelegationError</a> = <a href="#v:DelegationCantApplyBlocks">DelegationCantApplyBlocks</a> Text</li><li class="src short"><span class="keyword">type</span> <a href="#t:DelegationStateAction">DelegationStateAction</a> = State <a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a></li><li class="src short"><a href="#v:runDelegationStateAction">runDelegationStateAction</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadMask m, <a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m) =&gt; <a href="Pos-Delegation.html#t:DelegationStateAction">DelegationStateAction</a> a -&gt; m a</li><li class="src short"><a href="#v:invalidateProxyCaches">invalidateProxyCaches</a> :: <a href="Pos-Configuration.html#t:HasNodeConfiguration">HasNodeConfiguration</a> =&gt; <a href="../time-1.6.0.1/Data-Time-Clock.html#t:UTCTime">UTCTime</a> -&gt; <a href="Pos-Delegation.html#t:DelegationStateAction">DelegationStateAction</a> ()</li><li class="src short"><a href="#v:mkDelegationVar">mkDelegationVar</a> :: <span class="keyword">forall</span> ssc m. (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-DB-Block.html#t:MonadBlockDB">MonadBlockDB</a> ssc m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>, <a href="Pos-Configuration.html#t:HasNodeConfiguration">HasNodeConfiguration</a>) =&gt; m <a href="Pos-Delegation.html#t:DelegationVar">DelegationVar</a></li><li class="src short"><a href="#v:getDlgTransPsk">getDlgTransPsk</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a>, <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>))</li><li class="src short"><a href="#v:getDlgMempool">getDlgMempool</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m, <a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, MonadMask m) =&gt; m <a href="Pos-Delegation-Types.html#t:DlgPayload">DlgPayload</a></li><li class="src short"><a href="#v:clearDlgMemPool">clearDlgMemPool</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, MonadMask m) =&gt; m ()</li><li class="src short"><a href="#v:clearDlgMemPoolAction">clearDlgMemPoolAction</a> :: <a href="Pos-Delegation.html#t:DelegationStateAction">DelegationStateAction</a> ()</li><li class="src short"><a href="#v:deleteFromDlgMemPool">deleteFromDlgMemPool</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a> -&gt; <a href="Pos-Delegation.html#t:DelegationStateAction">DelegationStateAction</a> ()</li><li class="src short"><a href="#v:modifyDlgMemPool">modifyDlgMemPool</a> :: (<a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a> -&gt; <a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a>) -&gt; <a href="Pos-Delegation.html#t:DelegationStateAction">DelegationStateAction</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:PskHeavyVerdict">PskHeavyVerdict</a><ul class="subs"><li>= <a href="#v:PHExists">PHExists</a></li><li>| <a href="#v:PHInvalid">PHInvalid</a> Text</li><li>| <a href="#v:PHBroken">PHBroken</a></li><li>| <a href="#v:PHCached">PHCached</a></li><li>| <a href="#v:PHTipMismatch">PHTipMismatch</a></li><li>| <a href="#v:PHExhausted">PHExhausted</a></li><li>| <a href="#v:PHRemoved">PHRemoved</a></li><li>| <a href="#v:PHAdded">PHAdded</a></li></ul></li><li class="src short"><a href="#v:processProxySKHeavy">processProxySKHeavy</a> :: <span class="keyword">forall</span> ssc ctx m. (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadMask m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m, <a href="Pos-DB-Block.html#t:MonadBlockDB">MonadBlockDB</a> ssc m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadGState">MonadGState</a> m, <a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, MonadReader ctx m, <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens-39-">HasLens'</a> ctx <a href="../cardano-sl-lrc-1.0.3/Pos-Lrc-Context.html#t:LrcContext">LrcContext</a>, <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens-39-">HasLens'</a> ctx <a href="../cardano-sl-infra-1.0.3/Pos-StateLock.html#t:StateLock">StateLock</a>, Mockable CurrentTime m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a> -&gt; m <a href="Pos-Delegation.html#t:PskHeavyVerdict">PskHeavyVerdict</a></li><li class="src short"><a href="#v:processProxySKHeavyInternal">processProxySKHeavyInternal</a> :: <span class="keyword">forall</span> ssc ctx m. (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadMask m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m, <a href="Pos-DB-Block.html#t:MonadBlockDB">MonadBlockDB</a> ssc m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadGState">MonadGState</a> m, <a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, MonadReader ctx m, <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens-39-">HasLens'</a> ctx <a href="../cardano-sl-lrc-1.0.3/Pos-Lrc-Context.html#t:LrcContext">LrcContext</a>, Mockable CurrentTime m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a> -&gt; m <a href="Pos-Delegation.html#t:PskHeavyVerdict">PskHeavyVerdict</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PskLightVerdict">PskLightVerdict</a><ul class="subs"><li>= <a href="#v:PLUnrelated">PLUnrelated</a></li><li>| <a href="#v:PLInvalid">PLInvalid</a></li><li>| <a href="#v:PLExists">PLExists</a></li><li>| <a href="#v:PLCached">PLCached</a></li><li>| <a href="#v:PLRemoved">PLRemoved</a></li><li>| <a href="#v:PLAdded">PLAdded</a></li></ul></li><li class="src short"><a href="#v:processProxySKLight">processProxySKLight</a> :: (<a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, MonadReader ctx m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Context.html#t:HasPrimaryKey">HasPrimaryKey</a> ctx, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, MonadMask m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Rocks-Types.html#t:MonadRealDB">MonadRealDB</a> ctx m, Mockable CurrentTime m) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> -&gt; m <a href="Pos-Delegation.html#t:PskLightVerdict">PskLightVerdict</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ConfirmPskLightVerdict">ConfirmPskLightVerdict</a><ul class="subs"><li>= <a href="#v:CPValid">CPValid</a></li><li>| <a href="#v:CPInvalid">CPInvalid</a></li><li>| <a href="#v:CPCached">CPCached</a></li></ul></li><li class="src short"><a href="#v:processConfirmProxySk">processConfirmProxySk</a> :: (<a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadMask m, Mockable CurrentTime m) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySigLight">ProxySigLight</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> -&gt; m <a href="Pos-Delegation.html#t:ConfirmPskLightVerdict">ConfirmPskLightVerdict</a></li><li class="src short"><a href="#v:isProxySKConfirmed">isProxySKConfirmed</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadMask m, <a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:dlgVerifyBlocks">dlgVerifyBlocks</a> :: <span class="keyword">forall</span> ssc ctx m. (<a href="Pos-DB-Block.html#t:MonadBlockDB">MonadBlockDB</a> ssc m, <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadReader ctx m, <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens-39-">HasLens'</a> ctx <a href="../cardano-sl-lrc-1.0.3/Pos-Lrc-Context.html#t:LrcContext">LrcContext</a>, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:OldestFirst">OldestFirst</a> <a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:NE">NE</a> (<a href="Pos-Block-Core.html#t:Block">Block</a> ssc) -&gt; m (<a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> Text (<a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:OldestFirst">OldestFirst</a> <a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:NE">NE</a> <a href="Pos-Delegation-Types.html#t:DlgUndo">DlgUndo</a>))</li><li class="src short"><a href="#v:dlgApplyBlocks">dlgApplyBlocks</a> :: <span class="keyword">forall</span> ssc ctx m. (<a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m, WithLogger m, MonadMask m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>, <a href="../cardano-sl-ssc-1.0.3/Pos-Ssc-Class-Helpers.html#t:SscHelpersClass">SscHelpersClass</a> ssc) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:OldestFirst">OldestFirst</a> <a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:NE">NE</a> (<a href="Pos-Block-Types.html#t:Blund">Blund</a> ssc) -&gt; m (<a href="../base-4.9.1.0/Data-List-NonEmpty.html#t:NonEmpty">NonEmpty</a> <a href="../cardano-sl-db-1.0.3/Pos-DB-BatchOp.html#t:SomeBatchOp">SomeBatchOp</a>)</li><li class="src short"><a href="#v:dlgRollbackBlocks">dlgRollbackBlocks</a> :: <span class="keyword">forall</span> ssc ctx m. (<a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, <a href="Pos-DB-Block.html#t:MonadBlockDB">MonadBlockDB</a> ssc m, WithLogger m) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:NewestFirst">NewestFirst</a> <a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:NE">NE</a> (<a href="Pos-Block-Types.html#t:Blund">Blund</a> ssc) -&gt; m (<a href="../base-4.9.1.0/Data-List-NonEmpty.html#t:NonEmpty">NonEmpty</a> <a href="../cardano-sl-db-1.0.3/Pos-DB-BatchOp.html#t:SomeBatchOp">SomeBatchOp</a>)</li><li class="src short"><a href="#v:dlgNormalizeOnRollback">dlgNormalizeOnRollback</a> :: <span class="keyword">forall</span> ssc ctx m. (<a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, <a href="Pos-DB-Block.html#t:MonadBlockDB">MonadBlockDB</a> ssc m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadGState">MonadGState</a> m, <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadMask m, <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens-39-">HasLens'</a> ctx <a href="../cardano-sl-lrc-1.0.3/Pos-Lrc-Context.html#t:LrcContext">LrcContext</a>, Mockable CurrentTime m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>, <a href="../cardano-sl-ssc-1.0.3/Pos-Ssc-Class-Helpers.html#t:SscHelpersClass">SscHelpersClass</a> ssc) =&gt; m ()</li><li class="src short"><a href="#v:delegationLrcConsumer">delegationLrcConsumer</a> :: (<a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadGState">MonadGState</a> m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m) =&gt; <a href="../cardano-sl-lrc-1.0.3/Pos-Lrc-Consumer.html#t:LrcConsumer">LrcConsumer</a> m</li><li class="src short">module <a href="Pos-Delegation-Types.html">Pos.Delegation.Types</a></li><li class="src short"><a href="#v:dlgWorkers">dlgWorkers</a> :: <a href="Pos-WorkMode-Class.html#t:WorkMode">WorkMode</a> ssc ctx m =&gt; ([<a href="../cardano-sl-infra-1.0.3/Pos-Communication-Types-Protocol.html#t:WorkerSpec">WorkerSpec</a> m], <a href="../cardano-sl-infra-1.0.3/Pos-Communication-Types-Protocol.html#t:OutSpecs">OutSpecs</a>)</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">class</span> MonadThrow m =&gt; <a id="t:MonadCedeRead" class="def">MonadCedeRead</a> m <span class="keyword">where</span> <a href="src/Pos.Delegation.Cede.Class.html#MonadCedeRead" class="link">Source</a> <a href="#t:MonadCedeRead" class="selflink">#</a></p><div class="doc"><p>This monad includes psk reading capabilities.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:getPsk" class="def">getPsk</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>) <a href="src/Pos.Delegation.Cede.Class.html#getPsk" class="link">Source</a> <a href="#v:getPsk" class="selflink">#</a></p><div class="doc"><p>Resolve public key of issuer (hashed) to the psk. This method
 never returns a revoke psk.</p></div><p class="src"><a id="v:getPsk" class="def">getPsk</a> :: (MonadTrans t, <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> n, t n ~ m) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>) <a href="src/Pos.Delegation.Cede.Class.html#getPsk" class="link">Source</a> <a href="#v:getPsk" class="selflink">#</a></p><div class="doc"><p>Resolve public key of issuer (hashed) to the psk. This method
 never returns a revoke psk.</p></div></div><div class="subs instances"><p id="control.i:MonadCedeRead" class="caption collapser" onclick="toggleSection('i:MonadCedeRead')">Instances</p><div id="section.i:MonadCedeRead" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadCedeRead:MonadCedeRead:1" class="instance expander" onclick="toggleSection('i:ic:MonadCedeRead:MonadCedeRead:1')"></span> <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> (<a href="Pos-Delegation.html#t:DBCede">DBCede</a> m)</span> <a href="src/Pos.Delegation.Cede.Class.html#line-43" class="link">Source</a> <a href="#t:MonadCedeRead" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:MonadCedeRead:MonadCedeRead:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getPsk">getPsk</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; <a href="Pos-Delegation.html#t:DBCede">DBCede</a> m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>) <a href="src/Pos.Delegation.Cede.Class.html#getPsk" class="link">Source</a> <a href="#v:getPsk" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadCedeRead:MonadCedeRead:2" class="instance expander" onclick="toggleSection('i:ic:MonadCedeRead:MonadCedeRead:2')"></span> <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> m =&gt; <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> (StateT s m)</span> <a href="src/Pos.Delegation.Cede.Class.html#line-37" class="link">Source</a> <a href="#t:MonadCedeRead" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:MonadCedeRead:MonadCedeRead:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getPsk">getPsk</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; StateT s m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>) <a href="src/Pos.Delegation.Cede.Class.html#getPsk" class="link">Source</a> <a href="#v:getPsk" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadCedeRead:MonadCedeRead:3" class="instance expander" onclick="toggleSection('i:ic:MonadCedeRead:MonadCedeRead:3')"></span> <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> m =&gt; <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> (ExceptT s m)</span> <a href="src/Pos.Delegation.Cede.Class.html#line-38" class="link">Source</a> <a href="#t:MonadCedeRead" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:MonadCedeRead:MonadCedeRead:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getPsk">getPsk</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; ExceptT s m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>) <a href="src/Pos.Delegation.Cede.Class.html#getPsk" class="link">Source</a> <a href="#v:getPsk" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadCedeRead:MonadCedeRead:4" class="instance expander" onclick="toggleSection('i:ic:MonadCedeRead:MonadCedeRead:4')"></span> <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> m =&gt; <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> (ReaderT <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> s m)</span> <a href="src/Pos.Delegation.Cede.Class.html#line-36" class="link">Source</a> <a href="#t:MonadCedeRead" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:MonadCedeRead:MonadCedeRead:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getPsk">getPsk</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; ReaderT <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> s m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>) <a href="src/Pos.Delegation.Cede.Class.html#getPsk" class="link">Source</a> <a href="#v:getPsk" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:getPskPk" class="def">getPskPk</a> :: <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a> -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>) <a href="src/Pos.Delegation.Cede.Class.html#getPskPk" class="link">Source</a> <a href="#v:getPskPk" class="selflink">#</a></p><div class="doc"><p>Resolve by public key. Equialent to <code>getPsk . addressHash</code>.</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> m =&gt; <a id="t:MonadCede" class="def">MonadCede</a> m <span class="keyword">where</span> <a href="src/Pos.Delegation.Cede.Class.html#MonadCede" class="link">Source</a> <a href="#t:MonadCede" class="selflink">#</a></p><div class="doc"><p>Monad that can modify PSK contents inside.</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:modPsk" class="def">modPsk</a> :: <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; m () <a href="src/Pos.Delegation.Cede.Class.html#modPsk" class="link">Source</a> <a href="#v:modPsk" class="selflink">#</a></p><div class="doc"><p>Modify the content of PSK holder using the edge delegation
 action (change/removal).</p></div><p class="src"><a id="v:modPsk" class="def">modPsk</a> :: (MonadTrans t, <a href="Pos-Delegation.html#t:MonadCede">MonadCede</a> n, t n ~ m) =&gt; <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; m () <a href="src/Pos.Delegation.Cede.Class.html#modPsk" class="link">Source</a> <a href="#v:modPsk" class="selflink">#</a></p><div class="doc"><p>Modify the content of PSK holder using the edge delegation
 action (change/removal).</p></div></div><div class="subs instances"><p id="control.i:MonadCede" class="caption collapser" onclick="toggleSection('i:MonadCede')">Instances</p><div id="section.i:MonadCede" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadCede:MonadCede:1" class="instance expander" onclick="toggleSection('i:ic:MonadCede:MonadCede:1')"></span> <a href="Pos-Delegation.html#t:MonadCede">MonadCede</a> m =&gt; <a href="Pos-Delegation.html#t:MonadCede">MonadCede</a> (StateT s m)</span> <a href="src/Pos.Delegation.Cede.Class.html#line-52" class="link">Source</a> <a href="#t:MonadCede" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:MonadCede:MonadCede:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:modPsk">modPsk</a> :: <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; StateT s m () <a href="src/Pos.Delegation.Cede.Class.html#modPsk" class="link">Source</a> <a href="#v:modPsk" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadCede:MonadCede:2" class="instance expander" onclick="toggleSection('i:ic:MonadCede:MonadCede:2')"></span> <a href="Pos-Delegation.html#t:MonadCede">MonadCede</a> m =&gt; <a href="Pos-Delegation.html#t:MonadCede">MonadCede</a> (ExceptT s m)</span> <a href="src/Pos.Delegation.Cede.Class.html#line-53" class="link">Source</a> <a href="#t:MonadCede" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:MonadCede:MonadCede:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:modPsk">modPsk</a> :: <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; ExceptT s m () <a href="src/Pos.Delegation.Cede.Class.html#modPsk" class="link">Source</a> <a href="#v:modPsk" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadCede:MonadCede:3" class="instance expander" onclick="toggleSection('i:ic:MonadCede:MonadCede:3')"></span> <a href="Pos-Delegation.html#t:MonadCede">MonadCede</a> m =&gt; <a href="Pos-Delegation.html#t:MonadCede">MonadCede</a> (ReaderT <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> s m)</span> <a href="src/Pos.Delegation.Cede.Class.html#line-51" class="link">Source</a> <a href="#t:MonadCede" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:MonadCede:MonadCede:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:modPsk">modPsk</a> :: <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; ReaderT <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> s m () <a href="src/Pos.Delegation.Cede.Class.html#modPsk" class="link">Source</a> <a href="#v:modPsk" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DBCede" class="def">DBCede</a> = <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:TaggedTrans">TaggedTrans</a> DBCedeTag IdentityT <a href="src/Pos.Delegation.Cede.Holders.html#DBCede" class="link">Source</a> <a href="#t:DBCede" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:runDBCede" class="def">runDBCede</a> :: <a href="Pos-Delegation.html#t:DBCede">DBCede</a> m a -&gt; m a <a href="src/Pos.Delegation.Cede.Holders.html#runDBCede" class="link">Source</a> <a href="#v:runDBCede" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MapCede" class="def">MapCede</a> = LazyStateT' <a href="Pos-Delegation.html#t:CedeModifier">CedeModifier</a> <a href="src/Pos.Delegation.Cede.Holders.html#MapCede" class="link">Source</a> <a href="#t:MapCede" class="selflink">#</a></p><div class="doc"><p>Monad transformer that holds extra layer of modifications to the
 underlying set of PSKs (which can be empty if you want).</p></div></div><div class="top"><p class="src"><a id="v:runMapCede" class="def">runMapCede</a> :: <a href="Pos-Delegation.html#t:CedeModifier">CedeModifier</a> -&gt; <a href="Pos-Delegation.html#t:MapCede">MapCede</a> m a -&gt; m (a, <a href="Pos-Delegation.html#t:CedeModifier">CedeModifier</a>) <a href="src/Pos.Delegation.Cede.Holders.html#runMapCede" class="link">Source</a> <a href="#v:runMapCede" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:evalMapCede" class="def">evalMapCede</a> :: <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Pos-Delegation.html#t:CedeModifier">CedeModifier</a> -&gt; <a href="Pos-Delegation.html#t:MapCede">MapCede</a> m a -&gt; m a <a href="src/Pos.Delegation.Cede.Holders.html#evalMapCede" class="link">Source</a> <a href="#v:evalMapCede" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getPskChain" class="def">getPskChain</a> :: <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m <a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a> <a href="src/Pos.Delegation.Cede.Logic.html#getPskChain" class="link">Source</a> <a href="#v:getPskChain" class="selflink">#</a></p><div class="doc"><p>Given an issuer, retrieves all certificate chains starting in
 issuer. This function performs a series of sequential db reads so
 it must be used under the shared lock.</p></div></div><div class="top"><p class="src"><a id="v:getPskChainInternal" class="def">getPskChainInternal</a> :: <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> m =&gt; HashSet <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m <a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a> <a href="src/Pos.Delegation.Cede.Logic.html#getPskChainInternal" class="link">Source</a> <a href="#v:getPskChainInternal" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:detectCycleOnAddition" class="def">detectCycleOnAddition</a> <a href="src/Pos.Delegation.Cede.Logic.html#detectCycleOnAddition" class="link">Source</a> <a href="#v:detectCycleOnAddition" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a></td><td class="doc"><p>PSK to check against</p></td></tr><tr><td class="src">-&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a>)</td><td class="doc"><p>Problematic PSK if any</p></td></tr></table></div><div class="doc"><p>Checks if addition of the PSK to the map will lead to cycles. The
 initial map may or may not contain this PSK. Returns nothing if
 it's good, first-already-visited public key otherwise.</p></div></div><div class="top"><p class="src"><a id="v:dlgReachesIssuance" class="def">dlgReachesIssuance</a> <a href="src/Pos.Delegation.Cede.Logic.html#dlgReachesIssuance" class="link">Source</a> <a href="#v:dlgReachesIssuance" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Pos-Delegation.html#t:MonadCedeRead">MonadCedeRead</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a></td><td class="doc"><p>Issuer</p></td></tr><tr><td class="src">-&gt; <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a></td><td class="doc"><p>Delegate</p></td></tr><tr><td class="src">-&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a></td><td class="doc"><p>i-&gt;d psk</p></td></tr><tr><td class="src">-&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Given a psk getPskr, issuer, delegate and cert he uses (to sign,
 or taken from psk), checks if there's a psk chain &quot;issuer &#8594;
 delegate&quot; and the last cert matches the provided one (can be
 retrieved using <code>psigPsk</code>). This *does not* check that delegate
 didn't issue a psk to somebody else.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DlgEdgeAction" class="def">DlgEdgeAction</a> <a href="src/Pos.Delegation.Cede.Types.html#DlgEdgeAction" class="link">Source</a> <a href="#t:DlgEdgeAction" class="selflink">#</a></p><div class="doc"><p>Action on delegation database, used commonly. Generalizes
 applications and rollbacks.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DlgEdgeAdd" class="def">DlgEdgeAdd</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:DlgEdgeDel" class="def">DlgEdgeDel</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:DlgEdgeAction" class="caption collapser" onclick="toggleSection('i:DlgEdgeAction')">Instances</p><div id="section.i:DlgEdgeAction" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DlgEdgeAction:Eq:1" class="instance expander" onclick="toggleSection('i:id:DlgEdgeAction:Eq:1')"></span> <a href="../base-4.9.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a></span> <a href="src/Pos.Delegation.Cede.Types.html#line-25" class="link">Source</a> <a href="#t:DlgEdgeAction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DlgEdgeAction:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DlgEdgeAction:Show:2" class="instance expander" onclick="toggleSection('i:id:DlgEdgeAction:Show:2')"></span> <a href="../base-4.9.1.0/Text-Show.html#t:Show">Show</a> <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a></span> <a href="src/Pos.Delegation.Cede.Types.html#line-25" class="link">Source</a> <a href="#t:DlgEdgeAction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DlgEdgeAction:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; <a href="../base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a>] -&gt; <a href="../base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DlgEdgeAction:Generic:3" class="instance expander" onclick="toggleSection('i:id:DlgEdgeAction:Generic:3')"></span> <a href="../base-4.9.1.0/GHC-Generics.html#t:Generic">Generic</a> <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a></span> <a href="src/Pos.Delegation.Cede.Types.html#line-25" class="link">Source</a> <a href="#t:DlgEdgeAction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DlgEdgeAction:Generic:3" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.9.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> :: <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; <a href="../base-4.9.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.9.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> x -&gt; <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> <a href="#v:to" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DlgEdgeAction:Buildable:4" class="instance expander" onclick="toggleSection('i:id:DlgEdgeAction:Buildable:4')"></span> Buildable <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a></span> <a href="src/Pos.Delegation.Cede.Types.html#line-29" class="link">Source</a> <a href="#t:DlgEdgeAction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DlgEdgeAction:Buildable:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:build">build</a> :: <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; Builder</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DlgEdgeAction:Hashable:5" class="instance expander" onclick="toggleSection('i:id:DlgEdgeAction:Hashable:5')"></span> Hashable <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a></span> <a href="src/Pos.Delegation.Cede.Types.html#line-27" class="link">Source</a> <a href="#t:DlgEdgeAction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DlgEdgeAction:Hashable:5" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:hashWithSalt">hashWithSalt</a> :: <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a></p><p class="src"><a href="#v:hash">hash</a> :: <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DlgEdgeAction:Rep:6" class="instance expander" onclick="toggleSection('i:id:DlgEdgeAction:Rep:6')"></span> <span class="keyword">type</span> <a href="../base-4.9.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a></span> <a href="src/Pos.Delegation.Cede.Types.html#line-22" class="link">Source</a> <a href="#t:DlgEdgeAction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DlgEdgeAction:Rep:6" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="../base-4.9.1.0/GHC-Generics.html#t:Rep">Rep</a> <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> = <a href="../base-4.9.1.0/GHC-Generics.html#t:D1">D1</a> (<a href="../base-4.9.1.0/GHC-Generics.html#v:MetaData">MetaData</a> &quot;DlgEdgeAction&quot; &quot;Pos.Delegation.Cede.Types&quot; &quot;cardano-sl-1.0.3-SkWVBwEf8n9OZAzLwvkrY&quot; <a href="../base-4.9.1.0/Data-Bool.html#v:False">False</a>) (<a href="../base-4.9.1.0/GHC-Generics.html#t::-43-:">(:+:)</a> (<a href="../base-4.9.1.0/GHC-Generics.html#t:C1">C1</a> (<a href="../base-4.9.1.0/GHC-Generics.html#v:MetaCons">MetaCons</a> &quot;DlgEdgeAdd&quot; <a href="../base-4.9.1.0/GHC-Generics.html#v:PrefixI">PrefixI</a> <a href="../base-4.9.1.0/Data-Bool.html#v:False">False</a>) (<a href="../base-4.9.1.0/GHC-Generics.html#t:S1">S1</a> (<a href="../base-4.9.1.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.9.1.0/Data-Maybe.html#v:Nothing">Nothing</a> <a href="../base-4.9.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a>) <a href="../base-4.9.1.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.9.1.0/GHC-Generics.html#v:SourceStrict">SourceStrict</a> <a href="../base-4.9.1.0/GHC-Generics.html#v:DecidedStrict">DecidedStrict</a>) (<a href="../base-4.9.1.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>))) (<a href="../base-4.9.1.0/GHC-Generics.html#t:C1">C1</a> (<a href="../base-4.9.1.0/GHC-Generics.html#v:MetaCons">MetaCons</a> &quot;DlgEdgeDel&quot; <a href="../base-4.9.1.0/GHC-Generics.html#v:PrefixI">PrefixI</a> <a href="../base-4.9.1.0/Data-Bool.html#v:False">False</a>) (<a href="../base-4.9.1.0/GHC-Generics.html#t:S1">S1</a> (<a href="../base-4.9.1.0/GHC-Generics.html#v:MetaSel">MetaSel</a> (<a href="../base-4.9.1.0/Data-Maybe.html#v:Nothing">Nothing</a> <a href="../base-4.9.1.0/GHC-TypeLits.html#t:Symbol">Symbol</a>) <a href="../base-4.9.1.0/GHC-Generics.html#v:NoSourceUnpackedness">NoSourceUnpackedness</a> <a href="../base-4.9.1.0/GHC-Generics.html#v:SourceStrict">SourceStrict</a> <a href="../base-4.9.1.0/GHC-Generics.html#v:DecidedStrict">DecidedStrict</a>) (<a href="../base-4.9.1.0/GHC-Generics.html#t:Rec0">Rec0</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>))))</div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:pskToDlgEdgeAction" class="def">pskToDlgEdgeAction</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a> -&gt; <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> <a href="src/Pos.Delegation.Cede.Types.html#pskToDlgEdgeAction" class="link">Source</a> <a href="#v:pskToDlgEdgeAction" class="selflink">#</a></p><div class="doc"><p>Converts heavy psk to the psk mapping action.</p></div></div><div class="top"><p class="src"><a id="v:dlgEdgeActionIssuer" class="def">dlgEdgeActionIssuer</a> :: <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> <a href="src/Pos.Delegation.Cede.Types.html#dlgEdgeActionIssuer" class="link">Source</a> <a href="#v:dlgEdgeActionIssuer" class="selflink">#</a></p><div class="doc"><p>Gets issuer of edge action (u from the edge uv).</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:CedeModifier" class="def">CedeModifier</a> = HashMap <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> <a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a> <a href="src/Pos.Delegation.Cede.Types.html#CedeModifier" class="link">Source</a> <a href="#t:CedeModifier" class="selflink">#</a></p><div class="doc"><p>A set of modifications for PSK storage.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DlgMemPool" class="def">DlgMemPool</a> = HashMap <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a> <a href="src/Pos.Delegation.Types.html#DlgMemPool" class="link">Source</a> <a href="#t:DlgMemPool" class="selflink">#</a></p><div class="doc"><p>Map from issuer public keys to related heavy certs.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DelegationWrap" class="def">DelegationWrap</a> <a href="src/Pos.Delegation.Class.html#DelegationWrap" class="link">Source</a> <a href="#t:DelegationWrap" class="selflink">#</a></p><div class="doc"><p>In-memory storage needed for delegation logic.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DelegationWrap" class="def">DelegationWrap</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:_dwMessageCache" class="def">_dwMessageCache</a> :: !(LRU (<a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>) <a href="../time-1.6.0.1/Data-Time-Clock.html#t:UTCTime">UTCTime</a>)</dfn><div class="doc"><p>Message cache to prevent infinite propagation of useless
 certs.</p></div></li><li><dfn class="src"><a id="v:_dwConfirmationCache" class="def">_dwConfirmationCache</a> :: !(LRU <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> <a href="../time-1.6.0.1/Data-Time-Clock.html#t:UTCTime">UTCTime</a>)</dfn><div class="doc"><p>Confirmation cache for lightweight PSKs. Not used in endpoints tho.</p></div></li><li><dfn class="src"><a id="v:_dwProxySKPool" class="def">_dwProxySKPool</a> :: !<a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a></dfn><div class="doc"><p>Memory pool of hardweight proxy secret keys. Keys of this
 map are issuer public keys.</p></div></li><li><dfn class="src"><a id="v:_dwPoolSize" class="def">_dwPoolSize</a> :: !Byte</dfn><div class="doc"><p>Size of <code><a href="Pos-Delegation.html#v:_dwProxySKPool">_dwProxySKPool</a></code> in bytes.
 It's not exact size for a variety of reasons, but it should be
 a good approximation.</p></div></li><li><dfn class="src"><a id="v:_dwTip" class="def">_dwTip</a> :: !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a></dfn><div class="doc"><p>Header tip <code><a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a></code> is correct in relation to.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:DelegationWrap" class="caption collapser" onclick="toggleSection('i:DelegationWrap')">Instances</p><div id="section.i:DelegationWrap" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DelegationWrap:HasLens:1" class="instance expander" onclick="toggleSection('i:id:DelegationWrap:HasLens:1')"></span> <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens">HasLens</a> <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> <a href="Pos-Delegation.html#t:DelegationVar">DelegationVar</a> <a href="Pos-Generator-Block.html#t:BlockGenContext">BlockGenContext</a> <a href="Pos-Delegation.html#t:DelegationVar">DelegationVar</a></span> <a href="#t:HasLens" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DelegationWrap:HasLens:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lensOf">lensOf</a> :: Lens' <a href="Pos-Delegation.html#t:DelegationVar">DelegationVar</a> inner <a href="#v:lensOf" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DelegationWrap:HasLens:2" class="instance expander" onclick="toggleSection('i:id:DelegationWrap:HasLens:2')"></span> <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens">HasLens</a> <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> <a href="Pos-Delegation.html#t:DelegationVar">DelegationVar</a> (<a href="Pos-WorkMode.html#t:RealModeContext">RealModeContext</a> ssc) <a href="Pos-Delegation.html#t:DelegationVar">DelegationVar</a></span> <a href="#t:HasLens" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DelegationWrap:HasLens:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lensOf">lensOf</a> :: Lens' <a href="Pos-Delegation.html#t:DelegationVar">DelegationVar</a> inner <a href="#v:lensOf" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:dwMessageCache" class="def">dwMessageCache</a> :: Lens' <a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a> (LRU (<a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>) <a href="../time-1.6.0.1/Data-Time-Clock.html#t:UTCTime">UTCTime</a>) <a href="src/Pos.Delegation.Class.html#dwMessageCache" class="link">Source</a> <a href="#v:dwMessageCache" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dwConfirmationCache" class="def">dwConfirmationCache</a> :: Lens' <a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a> (LRU <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> <a href="../time-1.6.0.1/Data-Time-Clock.html#t:UTCTime">UTCTime</a>) <a href="src/Pos.Delegation.Class.html#dwConfirmationCache" class="link">Source</a> <a href="#v:dwConfirmationCache" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dwProxySKPool" class="def">dwProxySKPool</a> :: Lens' <a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a> <a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a> <a href="src/Pos.Delegation.Class.html#dwProxySKPool" class="link">Source</a> <a href="#v:dwProxySKPool" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dwPoolSize" class="def">dwPoolSize</a> :: Lens' <a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a> Byte <a href="src/Pos.Delegation.Class.html#dwPoolSize" class="link">Source</a> <a href="#v:dwPoolSize" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dwTip" class="def">dwTip</a> :: Lens' <a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:HeaderHash">HeaderHash</a> <a href="src/Pos.Delegation.Class.html#dwTip" class="link">Source</a> <a href="#v:dwTip" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DelegationVar" class="def">DelegationVar</a> = <a href="../base-4.9.1.0/GHC-Conc.html#t:TVar">TVar</a> <a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a> <a href="src/Pos.Delegation.Class.html#DelegationVar" class="link">Source</a> <a href="#t:DelegationVar" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MonadDelegation" class="def">MonadDelegation</a> ctx m = (MonadReader ctx m, <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens">HasLens</a> <a href="Pos-Delegation.html#t:DelegationVar">DelegationVar</a> ctx <a href="Pos-Delegation.html#t:DelegationVar">DelegationVar</a>, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>) <a href="src/Pos.Delegation.Class.html#MonadDelegation" class="link">Source</a> <a href="#t:MonadDelegation" class="selflink">#</a></p><div class="doc"><p>We're locking on the whole delegation wrap at once. Locking on
 independent components is better in performance, so there's a place
 for optimization here.</p></div></div><div class="top"><p class="src"><a id="v:askDelegationState" class="def">askDelegationState</a> :: <a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m =&gt; m <a href="Pos-Delegation.html#t:DelegationVar">DelegationVar</a> <a href="src/Pos.Delegation.Class.html#askDelegationState" class="link">Source</a> <a href="#v:askDelegationState" class="selflink">#</a></p></div><h1 id="g:1">Getters and predicates</h1><div class="top"><p class="src"><a id="v:getPskByIssuer" class="def">getPskByIssuer</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; <a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>) <a href="src/Pos.Delegation.DB.html#getPskByIssuer" class="link">Source</a> <a href="#v:getPskByIssuer" class="selflink">#</a></p><div class="doc"><p>Retrieves certificate by issuer public key or his
 address/stakeholder id, if present.</p></div></div><div class="top"><p class="src"><a id="v:isIssuerByAddressHash" class="def">isIssuerByAddressHash</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Pos.Delegation.DB.html#isIssuerByAddressHash" class="link">Source</a> <a href="#v:isIssuerByAddressHash" class="selflink">#</a></p><div class="doc"><p>Checks if stakeholder is psk issuer.</p></div></div><div class="top"><p class="src"><a id="v:getDlgTransitive" class="def">getDlgTransitive</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>) <a href="src/Pos.Delegation.DB.html#getDlgTransitive" class="link">Source</a> <a href="#v:getDlgTransitive" class="selflink">#</a></p><div class="doc"><p>Given issuer <code>i</code> returns <code>d</code> such that there exists <code>x1..xn</code> with
 <code>i&#8594;x1&#8594;...&#8594;xn&#8594;d</code>.</p></div></div><div class="top"><p class="src"><a id="v:getDlgTransitiveReverse" class="def">getDlgTransitiveReverse</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m (HashSet <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>) <a href="src/Pos.Delegation.DB.html#getDlgTransitiveReverse" class="link">Source</a> <a href="#v:getDlgTransitiveReverse" class="selflink">#</a></p><div class="doc"><p>Reverse map of transitive delegation. Given a delegate <code>d</code>
 returns all <code>i</code> such that <code><a href="Pos-Delegation.html#v:getDlgTransitive">getDlgTransitive</a></code> returns <code>d</code> on <code>i</code>.</p></div></div><div class="top"><p class="src"><a id="v:isIssuerPostedThisEpoch" class="def">isIssuerPostedThisEpoch</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Pos.Delegation.DB.html#isIssuerPostedThisEpoch" class="link">Source</a> <a href="#v:isIssuerPostedThisEpoch" class="selflink">#</a></p><div class="doc"><p>Check if issuer belongs to the postedThisEpoch map. See module
 documentation for the details.</p></div></div><h1 id="g:2">Initialization</h1><div class="top"><p class="src"><a id="v:initGStateDlg" class="def">initGStateDlg</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Genesis-Types.html#t:GenesisDelegation">GenesisDelegation</a> -&gt; m () <a href="src/Pos.Delegation.DB.html#initGStateDlg" class="link">Source</a> <a href="#v:initGStateDlg" class="selflink">#</a></p><div class="doc"><p>Initialize delegation part of GState DB.</p></div></div><h1 id="g:3">Batch ops</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DelegationOp" class="def">DelegationOp</a> <a href="src/Pos.Delegation.DB.html#DelegationOp" class="link">Source</a> <a href="#t:DelegationOp" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PskFromEdgeAction" class="def">PskFromEdgeAction</a> !<a href="Pos-Delegation.html#t:DlgEdgeAction">DlgEdgeAction</a></td><td class="doc"><p>Adds or removes Psk. Overwrites on addition if present.</p></td></tr><tr><td class="src"><a id="v:AddTransitiveDlg" class="def">AddTransitiveDlg</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a></td><td class="doc"><p>Transitive delegation relation adding.</p></td></tr><tr><td class="src"><a id="v:DelTransitiveDlg" class="def">DelTransitiveDlg</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a></td><td class="doc"><p>Remove i -&gt; d link for i.</p></td></tr><tr><td class="src"><a id="v:SetTransitiveDlgRev" class="def">SetTransitiveDlgRev</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> !(HashSet <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>)</td><td class="doc"><p>Set value to map d -&gt; [i], reverse index of transitive dlg</p></td></tr><tr><td class="src"><a id="v:AddPostedThisEpoch" class="def">AddPostedThisEpoch</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a></td><td class="doc"><p>Indicate that stakeholder has already posted psk this epoch.</p></td></tr><tr><td class="src"><a id="v:DelPostedThisEpoch" class="def">DelPostedThisEpoch</a> !<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a></td><td class="doc"><p>Remove stakeholderId from postedThisEpoch map.</p></td></tr></table></div><div class="subs instances"><p id="control.i:DelegationOp" class="caption collapser" onclick="toggleSection('i:DelegationOp')">Instances</p><div id="section.i:DelegationOp" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DelegationOp:Show:1" class="instance expander" onclick="toggleSection('i:id:DelegationOp:Show:1')"></span> <a href="../base-4.9.1.0/Text-Show.html#t:Show">Show</a> <a href="Pos-Delegation.html#t:DelegationOp">DelegationOp</a></span> <a href="src/Pos.Delegation.DB.html#line-151" class="link">Source</a> <a href="#t:DelegationOp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DelegationOp:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Pos-Delegation.html#t:DelegationOp">DelegationOp</a> -&gt; <a href="../base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Pos-Delegation.html#t:DelegationOp">DelegationOp</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Pos-Delegation.html#t:DelegationOp">DelegationOp</a>] -&gt; <a href="../base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DelegationOp:RocksBatchOp:2" class="instance expander" onclick="toggleSection('i:id:DelegationOp:RocksBatchOp:2')"></span> <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a> =&gt; <a href="../cardano-sl-db-1.0.3/Pos-DB-BatchOp.html#t:RocksBatchOp">RocksBatchOp</a> <a href="Pos-Delegation.html#t:DelegationOp">DelegationOp</a></span> <a href="src/Pos.Delegation.DB.html#line-153" class="link">Source</a> <a href="#t:DelegationOp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DelegationOp:RocksBatchOp:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toBatchOp">toBatchOp</a> :: <a href="Pos-Delegation.html#t:DelegationOp">DelegationOp</a> -&gt; [BatchOp] <a href="#v:toBatchOp" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><h1 id="g:4">Iteration</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DlgTransRevIter" class="def">DlgTransRevIter</a> <a href="src/Pos.Delegation.DB.html#DlgTransRevIter" class="link">Source</a> <a href="#t:DlgTransRevIter" class="selflink">#</a></p><div class="subs instances"><p id="control.i:DlgTransRevIter" class="caption collapser" onclick="toggleSection('i:DlgTransRevIter')">Instances</p><div id="section.i:DlgTransRevIter" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DlgTransRevIter:DBIteratorClass:1" class="instance expander" onclick="toggleSection('i:id:DlgTransRevIter:DBIteratorClass:1')"></span> <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:DBIteratorClass">DBIteratorClass</a> <a href="Pos-Delegation.html#t:DlgTransRevIter">DlgTransRevIter</a></span> <a href="src/Pos.Delegation.DB.html#line-183" class="link">Source</a> <a href="#t:DlgTransRevIter" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DlgTransRevIter:DBIteratorClass:1" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:IterKey">IterKey</a> <a href="Pos-Delegation.html#t:DlgTransRevIter">DlgTransRevIter</a> :: <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> <a href="#t:IterKey" class="selflink">#</a></p><p class="src"><span class="keyword">type</span> <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:IterValue">IterValue</a> <a href="Pos-Delegation.html#t:DlgTransRevIter">DlgTransRevIter</a> :: <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> <a href="#t:IterValue" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:iterKeyPrefix">iterKeyPrefix</a> :: <a href="../bytestring-0.10.8.1/Data-ByteString.html#t:ByteString">ByteString</a> <a href="#v:iterKeyPrefix" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DlgTransRevIter:IterValue:2" class="instance expander" onclick="toggleSection('i:id:DlgTransRevIter:IterValue:2')"></span> <span class="keyword">type</span> <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:IterValue">IterValue</a> <a href="Pos-Delegation.html#t:DlgTransRevIter">DlgTransRevIter</a></span> <a href="src/Pos.Delegation.DB.html#line-185" class="link">Source</a> <a href="#t:DlgTransRevIter" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DlgTransRevIter:IterValue:2" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:IterValue">IterValue</a> <a href="Pos-Delegation.html#t:DlgTransRevIter">DlgTransRevIter</a> = HashSet <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DlgTransRevIter:IterKey:3" class="instance expander" onclick="toggleSection('i:id:DlgTransRevIter:IterKey:3')"></span> <span class="keyword">type</span> <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:IterKey">IterKey</a> <a href="Pos-Delegation.html#t:DlgTransRevIter">DlgTransRevIter</a></span> <a href="src/Pos.Delegation.DB.html#line-184" class="link">Source</a> <a href="#t:DlgTransRevIter" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DlgTransRevIter:IterKey:3" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:IterKey">IterKey</a> <a href="Pos-Delegation.html#t:DlgTransRevIter">DlgTransRevIter</a> = <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:getDelegators" class="def">getDelegators</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; Source (ResourceT m) (<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>, HashSet <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>) <a href="src/Pos.Delegation.DB.html#getDelegators" class="link">Source</a> <a href="#v:getDelegators" class="selflink">#</a></p><div class="doc"><p>For each stakeholder, say who has delegated to that stakeholder
 (basically iterate over transitive reverse relation).</p><p>NB. It's not called <code>getIssuers</code> because we already have issuers (i.e.
 block issuers)</p></div></div><div class="top"><p class="src"><a id="v:getThisEpochPostedKeys" class="def">getThisEpochPostedKeys</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; m (HashSet <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a>) <a href="src/Pos.Delegation.DB.html#getThisEpochPostedKeys" class="link">Source</a> <a href="#v:getThisEpochPostedKeys" class="selflink">#</a></p><div class="doc"><p>Get all keys of thisEpochPosted set.</p></div></div><div class="top"><p class="src"><a id="v:dlgVerifyPayload" class="def">dlgVerifyPayload</a> :: MonadError Text m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:EpochIndex">EpochIndex</a> -&gt; <a href="Pos-Delegation-Types.html#t:DlgPayload">DlgPayload</a> -&gt; m () <a href="src/Pos.Delegation.Helpers.html#dlgVerifyPayload" class="link">Source</a> <a href="#v:dlgVerifyPayload" class="selflink">#</a></p><div class="doc"><p>Verify delegation payload without using GState. This function can
 be used for block verification in isolation, also it can be used
 for mempool verification.</p></div></div><div class="top"><p class="src"><a id="v:isRevokePsk" class="def">isRevokePsk</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:ProxySecretKey">ProxySecretKey</a> w -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Pos.Delegation.Helpers.html#isRevokePsk" class="link">Source</a> <a href="#v:isRevokePsk" class="selflink">#</a></p><div class="doc"><p>Checks if given PSK revokes delegation (issuer == delegate).</p></div></div><div class="top"><p class="src"><a id="v:dlgMemPoolApplyBlock" class="def">dlgMemPoolApplyBlock</a> :: <a href="Pos-Block-Core.html#t:MainBlock">MainBlock</a> ssc -&gt; <a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a> -&gt; <a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a> <a href="src/Pos.Delegation.Helpers.html#dlgMemPoolApplyBlock" class="link">Source</a> <a href="#v:dlgMemPoolApplyBlock" class="selflink">#</a></p><div class="doc"><p>Applies block certificates to <code>ProxySKHeavyMap</code>.</p></div></div><div class="top"><p class="src"><a id="v:delegationRelays" class="def">delegationRelays</a> :: <span class="keyword">forall</span> ssc ctx m. <a href="Pos-WorkMode-Class.html#t:WorkMode">WorkMode</a> ssc ctx m =&gt; [<a href="../cardano-sl-infra-1.0.3/Pos-Communication-Relay-Class.html#t:Relay">Relay</a> m] <a href="src/Pos.Delegation.Listeners.html#delegationRelays" class="link">Source</a> <a href="#v:delegationRelays" class="selflink">#</a></p><div class="doc"><p>Listeners for requests related to delegation processing.</p></div></div><h1 id="g:5">Exceptions</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DelegationError" class="def">DelegationError</a> <a href="src/Pos.Delegation.Logic.Common.html#DelegationError" class="link">Source</a> <a href="#t:DelegationError" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DelegationCantApplyBlocks" class="def">DelegationCantApplyBlocks</a> Text</td><td class="doc"><p>Can't apply blocks to state of transactions processing.</p></td></tr></table></div><div class="subs instances"><p id="control.i:DelegationError" class="caption collapser" onclick="toggleSection('i:DelegationError')">Instances</p><div id="section.i:DelegationError" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DelegationError:Show:1" class="instance expander" onclick="toggleSection('i:id:DelegationError:Show:1')"></span> <a href="../base-4.9.1.0/Text-Show.html#t:Show">Show</a> <a href="Pos-Delegation.html#t:DelegationError">DelegationError</a></span> <a href="src/Pos.Delegation.Logic.Common.html#line-54" class="link">Source</a> <a href="#t:DelegationError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DelegationError:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Pos-Delegation.html#t:DelegationError">DelegationError</a> -&gt; <a href="../base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Pos-Delegation.html#t:DelegationError">DelegationError</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Pos-Delegation.html#t:DelegationError">DelegationError</a>] -&gt; <a href="../base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DelegationError:Exception:2" class="instance expander" onclick="toggleSection('i:id:DelegationError:Exception:2')"></span> <a href="../base-4.9.1.0/Control-Exception-Base.html#t:Exception">Exception</a> <a href="Pos-Delegation.html#t:DelegationError">DelegationError</a></span> <a href="src/Pos.Delegation.Logic.Common.html#line-56" class="link">Source</a> <a href="#t:DelegationError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DelegationError:Exception:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Pos-Delegation.html#t:DelegationError">DelegationError</a> -&gt; <a href="../base-4.9.1.0/Control-Exception-Base.html#t:SomeException">SomeException</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="../base-4.9.1.0/Control-Exception-Base.html#t:SomeException">SomeException</a> -&gt; <a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Pos-Delegation.html#t:DelegationError">DelegationError</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Pos-Delegation.html#t:DelegationError">DelegationError</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> <a href="#v:displayException" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DelegationError:Buildable:3" class="instance expander" onclick="toggleSection('i:id:DelegationError:Buildable:3')"></span> Buildable <a href="Pos-Delegation.html#t:DelegationError">DelegationError</a></span> <a href="src/Pos.Delegation.Logic.Common.html#line-61" class="link">Source</a> <a href="#t:DelegationError" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DelegationError:Buildable:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:build">build</a> :: <a href="Pos-Delegation.html#t:DelegationError">DelegationError</a> -&gt; Builder</p></div></div></td></tr></table></div></div></div><h1 id="g:6">Modifying memstate</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DelegationStateAction" class="def">DelegationStateAction</a> = State <a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a> <a href="src/Pos.Delegation.Logic.Common.html#DelegationStateAction" class="link">Source</a> <a href="#t:DelegationStateAction" class="selflink">#</a></p><div class="doc"><p>Convenient monad to work in <code><a href="Pos-Delegation.html#t:DelegationWrap">DelegationWrap</a></code> state context.</p></div></div><div class="top"><p class="src"><a id="v:runDelegationStateAction" class="def">runDelegationStateAction</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadMask m, <a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m) =&gt; <a href="Pos-Delegation.html#t:DelegationStateAction">DelegationStateAction</a> a -&gt; m a <a href="src/Pos.Delegation.Logic.Common.html#runDelegationStateAction" class="link">Source</a> <a href="#v:runDelegationStateAction" class="selflink">#</a></p><div class="doc"><p>Executes atomic action on delegation variable.</p></div></div><div class="top"><p class="src"><a id="v:invalidateProxyCaches" class="def">invalidateProxyCaches</a> :: <a href="Pos-Configuration.html#t:HasNodeConfiguration">HasNodeConfiguration</a> =&gt; <a href="../time-1.6.0.1/Data-Time-Clock.html#t:UTCTime">UTCTime</a> -&gt; <a href="Pos-Delegation.html#t:DelegationStateAction">DelegationStateAction</a> () <a href="src/Pos.Delegation.Logic.Common.html#invalidateProxyCaches" class="link">Source</a> <a href="#v:invalidateProxyCaches" class="selflink">#</a></p><div class="doc"><p>Invalidates proxy caches using built-in constants.</p></div></div><h1 id="g:7">Common helpers</h1><div class="top"><p class="src"><a id="v:mkDelegationVar" class="def">mkDelegationVar</a> :: <span class="keyword">forall</span> ssc m. (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-DB-Block.html#t:MonadBlockDB">MonadBlockDB</a> ssc m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>, <a href="Pos-Configuration.html#t:HasNodeConfiguration">HasNodeConfiguration</a>) =&gt; m <a href="Pos-Delegation.html#t:DelegationVar">DelegationVar</a> <a href="src/Pos.Delegation.Logic.Common.html#mkDelegationVar" class="link">Source</a> <a href="#v:mkDelegationVar" class="selflink">#</a></p><div class="doc"><p>Make a new <code><a href="Pos-Delegation.html#t:DelegationVar">DelegationVar</a></code> and initialize it.</p><ul><li>Sets <code>_dwEpochId</code> to epoch of tip.</li><li>Initializes mempools/LRU caches.</li></ul></div></div><div class="top"><p class="src"><a id="v:getDlgTransPsk" class="def">getDlgTransPsk</a> :: <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:StakeholderId">StakeholderId</a> -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a>, <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a>)) <a href="src/Pos.Delegation.Logic.Common.html#getDlgTransPsk" class="link">Source</a> <a href="#v:getDlgTransPsk" class="selflink">#</a></p><div class="doc"><p>Retrieves last PSK in chain of delegation started by public key
 and resolves the passed issuer to a public key. Doesn't check that
 user himself didn't delegate. Uses database only.</p></div></div><h1 id="g:8">Heavyweight psks handling &amp; mempool</h1><div class="top"><p class="src"><a id="v:getDlgMempool" class="def">getDlgMempool</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m, <a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, MonadMask m) =&gt; m <a href="Pos-Delegation-Types.html#t:DlgPayload">DlgPayload</a> <a href="src/Pos.Delegation.Logic.Mempool.html#getDlgMempool" class="link">Source</a> <a href="#v:getDlgMempool" class="selflink">#</a></p><div class="doc"><p>Retrieves current mempool of heavyweight psks plus undo part.</p></div></div><div class="top"><p class="src"><a id="v:clearDlgMemPool" class="def">clearDlgMemPool</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, MonadMask m) =&gt; m () <a href="src/Pos.Delegation.Logic.Mempool.html#clearDlgMemPool" class="link">Source</a> <a href="#v:clearDlgMemPool" class="selflink">#</a></p><div class="doc"><p>Clears delegation mempool.</p></div></div><div class="top"><p class="src"><a id="v:clearDlgMemPoolAction" class="def">clearDlgMemPoolAction</a> :: <a href="Pos-Delegation.html#t:DelegationStateAction">DelegationStateAction</a> () <a href="src/Pos.Delegation.Logic.Mempool.html#clearDlgMemPoolAction" class="link">Source</a> <a href="#v:clearDlgMemPoolAction" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:deleteFromDlgMemPool" class="def">deleteFromDlgMemPool</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a> -&gt; <a href="Pos-Delegation.html#t:DelegationStateAction">DelegationStateAction</a> () <a href="src/Pos.Delegation.Logic.Mempool.html#deleteFromDlgMemPool" class="link">Source</a> <a href="#v:deleteFromDlgMemPool" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:modifyDlgMemPool" class="def">modifyDlgMemPool</a> :: (<a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a> -&gt; <a href="Pos-Delegation.html#t:DlgMemPool">DlgMemPool</a>) -&gt; <a href="Pos-Delegation.html#t:DelegationStateAction">DelegationStateAction</a> () <a href="src/Pos.Delegation.Logic.Mempool.html#modifyDlgMemPool" class="link">Source</a> <a href="#v:modifyDlgMemPool" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PskHeavyVerdict" class="def">PskHeavyVerdict</a> <a href="src/Pos.Delegation.Logic.Mempool.html#PskHeavyVerdict" class="link">Source</a> <a href="#t:PskHeavyVerdict" class="selflink">#</a></p><div class="doc"><p>Datatypes representing a verdict of heavy PSK processing.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PHExists" class="def">PHExists</a></td><td class="doc"><p>If we have exactly the same cert in psk mempool</p></td></tr><tr><td class="src"><a id="v:PHInvalid" class="def">PHInvalid</a> Text</td><td class="doc"><p>Can't accept PSK though it's most probably user's error</p></td></tr><tr><td class="src"><a id="v:PHBroken" class="def">PHBroken</a></td><td class="doc"><p>Broken (signature, most probably attack, we can ban for this)</p></td></tr><tr><td class="src"><a id="v:PHCached" class="def">PHCached</a></td><td class="doc"><p>Message is cached</p></td></tr><tr><td class="src"><a id="v:PHTipMismatch" class="def">PHTipMismatch</a></td><td class="doc"><p>Verdict can't be made at the moment, mempool tip is different from db one</p></td></tr><tr><td class="src"><a id="v:PHExhausted" class="def">PHExhausted</a></td><td class="doc"><p>Memory pool is exhausted and can't accept more data</p></td></tr><tr><td class="src"><a id="v:PHRemoved" class="def">PHRemoved</a></td><td class="doc"><p>Revoked previous psk from the mempool</p></td></tr><tr><td class="src"><a id="v:PHAdded" class="def">PHAdded</a></td><td class="doc"><p>Successfully processed/added to psk mempool</p></td></tr></table></div><div class="subs instances"><p id="control.i:PskHeavyVerdict" class="caption collapser" onclick="toggleSection('i:PskHeavyVerdict')">Instances</p><div id="section.i:PskHeavyVerdict" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PskHeavyVerdict:Eq:1" class="instance expander" onclick="toggleSection('i:id:PskHeavyVerdict:Eq:1')"></span> <a href="../base-4.9.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Pos-Delegation.html#t:PskHeavyVerdict">PskHeavyVerdict</a></span> <a href="src/Pos.Delegation.Logic.Mempool.html#line-136" class="link">Source</a> <a href="#t:PskHeavyVerdict" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PskHeavyVerdict:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Pos-Delegation.html#t:PskHeavyVerdict">PskHeavyVerdict</a> -&gt; <a href="Pos-Delegation.html#t:PskHeavyVerdict">PskHeavyVerdict</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Pos-Delegation.html#t:PskHeavyVerdict">PskHeavyVerdict</a> -&gt; <a href="Pos-Delegation.html#t:PskHeavyVerdict">PskHeavyVerdict</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PskHeavyVerdict:Show:2" class="instance expander" onclick="toggleSection('i:id:PskHeavyVerdict:Show:2')"></span> <a href="../base-4.9.1.0/Text-Show.html#t:Show">Show</a> <a href="Pos-Delegation.html#t:PskHeavyVerdict">PskHeavyVerdict</a></span> <a href="src/Pos.Delegation.Logic.Mempool.html#line-136" class="link">Source</a> <a href="#t:PskHeavyVerdict" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PskHeavyVerdict:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Pos-Delegation.html#t:PskHeavyVerdict">PskHeavyVerdict</a> -&gt; <a href="../base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Pos-Delegation.html#t:PskHeavyVerdict">PskHeavyVerdict</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Pos-Delegation.html#t:PskHeavyVerdict">PskHeavyVerdict</a>] -&gt; <a href="../base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:processProxySKHeavy" class="def">processProxySKHeavy</a> :: <span class="keyword">forall</span> ssc ctx m. (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadMask m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m, <a href="Pos-DB-Block.html#t:MonadBlockDB">MonadBlockDB</a> ssc m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadGState">MonadGState</a> m, <a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, MonadReader ctx m, <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens-39-">HasLens'</a> ctx <a href="../cardano-sl-lrc-1.0.3/Pos-Lrc-Context.html#t:LrcContext">LrcContext</a>, <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens-39-">HasLens'</a> ctx <a href="../cardano-sl-infra-1.0.3/Pos-StateLock.html#t:StateLock">StateLock</a>, Mockable CurrentTime m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a> -&gt; m <a href="Pos-Delegation.html#t:PskHeavyVerdict">PskHeavyVerdict</a> <a href="src/Pos.Delegation.Logic.Mempool.html#processProxySKHeavy" class="link">Source</a> <a href="#v:processProxySKHeavy" class="selflink">#</a></p><div class="doc"><p>Processes heavyweight psk. Puts it into the mempool
 depending on issuer's stake, overrides if exists, checks
 validity and cachemsg state.</p></div></div><div class="top"><p class="src"><a id="v:processProxySKHeavyInternal" class="def">processProxySKHeavyInternal</a> :: <span class="keyword">forall</span> ssc ctx m. (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadMask m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m, <a href="Pos-DB-Block.html#t:MonadBlockDB">MonadBlockDB</a> ssc m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadGState">MonadGState</a> m, <a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, MonadReader ctx m, <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens-39-">HasLens'</a> ctx <a href="../cardano-sl-lrc-1.0.3/Pos-Lrc-Context.html#t:LrcContext">LrcContext</a>, Mockable CurrentTime m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKHeavy">ProxySKHeavy</a> -&gt; m <a href="Pos-Delegation.html#t:PskHeavyVerdict">PskHeavyVerdict</a> <a href="src/Pos.Delegation.Logic.Mempool.html#processProxySKHeavyInternal" class="link">Source</a> <a href="#v:processProxySKHeavyInternal" class="selflink">#</a></p><div class="doc"><p>Main logic of heavy psk processing, doesn't have
 synchronization. Should be called <strong>only</strong> if you are sure that
 <code><a href="../cardano-sl-infra-1.0.3/Pos-StateLock.html#t:StateLock">StateLock</a></code> is taken already.</p></div></div><h1 id="g:9">Lightweight psks handling</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PskLightVerdict" class="def">PskLightVerdict</a> <a href="src/Pos.Delegation.Logic.Mempool.html#PskLightVerdict" class="link">Source</a> <a href="#t:PskLightVerdict" class="selflink">#</a></p><div class="doc"><p>PSK check verdict. It can be unrelated (other key or spoiled, no
 way to differ), exist in storage already or be cached.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PLUnrelated" class="def">PLUnrelated</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:PLInvalid" class="def">PLInvalid</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:PLExists" class="def">PLExists</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:PLCached" class="def">PLCached</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:PLRemoved" class="def">PLRemoved</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:PLAdded" class="def">PLAdded</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:PskLightVerdict" class="caption collapser" onclick="toggleSection('i:PskLightVerdict')">Instances</p><div id="section.i:PskLightVerdict" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PskLightVerdict:Eq:1" class="instance expander" onclick="toggleSection('i:id:PskLightVerdict:Eq:1')"></span> <a href="../base-4.9.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Pos-Delegation.html#t:PskLightVerdict">PskLightVerdict</a></span> <a href="src/Pos.Delegation.Logic.Mempool.html#line-257" class="link">Source</a> <a href="#t:PskLightVerdict" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PskLightVerdict:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Pos-Delegation.html#t:PskLightVerdict">PskLightVerdict</a> -&gt; <a href="Pos-Delegation.html#t:PskLightVerdict">PskLightVerdict</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Pos-Delegation.html#t:PskLightVerdict">PskLightVerdict</a> -&gt; <a href="Pos-Delegation.html#t:PskLightVerdict">PskLightVerdict</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PskLightVerdict:Show:2" class="instance expander" onclick="toggleSection('i:id:PskLightVerdict:Show:2')"></span> <a href="../base-4.9.1.0/Text-Show.html#t:Show">Show</a> <a href="Pos-Delegation.html#t:PskLightVerdict">PskLightVerdict</a></span> <a href="src/Pos.Delegation.Logic.Mempool.html#line-257" class="link">Source</a> <a href="#t:PskLightVerdict" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PskLightVerdict:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Pos-Delegation.html#t:PskLightVerdict">PskLightVerdict</a> -&gt; <a href="../base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Pos-Delegation.html#t:PskLightVerdict">PskLightVerdict</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Pos-Delegation.html#t:PskLightVerdict">PskLightVerdict</a>] -&gt; <a href="../base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:processProxySKLight" class="def">processProxySKLight</a> :: (<a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, MonadReader ctx m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Context.html#t:HasPrimaryKey">HasPrimaryKey</a> ctx, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m, MonadMask m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Rocks-Types.html#t:MonadRealDB">MonadRealDB</a> ctx m, Mockable CurrentTime m) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> -&gt; m <a href="Pos-Delegation.html#t:PskLightVerdict">PskLightVerdict</a> <a href="src/Pos.Delegation.Logic.Mempool.html#processProxySKLight" class="link">Source</a> <a href="#v:processProxySKLight" class="selflink">#</a></p><div class="doc"><p>Processes proxy secret key (understands do we need it,
 adds/caches on decision, returns this decision).</p></div></div><h1 id="g:10">Confirmations</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ConfirmPskLightVerdict" class="def">ConfirmPskLightVerdict</a> <a href="src/Pos.Delegation.Logic.Mempool.html#ConfirmPskLightVerdict" class="link">Source</a> <a href="#t:ConfirmPskLightVerdict" class="selflink">#</a></p><div class="doc"><p>Verdict of <code><a href="Pos-Delegation.html#v:processConfirmProxySk">processConfirmProxySk</a></code> function</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CPValid" class="def">CPValid</a></td><td class="doc"><p>Valid, saved</p></td></tr><tr><td class="src"><a id="v:CPInvalid" class="def">CPInvalid</a></td><td class="doc"><p>Invalid, throw away</p></td></tr><tr><td class="src"><a id="v:CPCached" class="def">CPCached</a></td><td class="doc"><p>Already saved</p></td></tr></table></div><div class="subs instances"><p id="control.i:ConfirmPskLightVerdict" class="caption collapser" onclick="toggleSection('i:ConfirmPskLightVerdict')">Instances</p><div id="section.i:ConfirmPskLightVerdict" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ConfirmPskLightVerdict:Eq:1" class="instance expander" onclick="toggleSection('i:id:ConfirmPskLightVerdict:Eq:1')"></span> <a href="../base-4.9.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Pos-Delegation.html#t:ConfirmPskLightVerdict">ConfirmPskLightVerdict</a></span> <a href="src/Pos.Delegation.Logic.Mempool.html#line-310" class="link">Source</a> <a href="#t:ConfirmPskLightVerdict" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ConfirmPskLightVerdict:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Pos-Delegation.html#t:ConfirmPskLightVerdict">ConfirmPskLightVerdict</a> -&gt; <a href="Pos-Delegation.html#t:ConfirmPskLightVerdict">ConfirmPskLightVerdict</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Pos-Delegation.html#t:ConfirmPskLightVerdict">ConfirmPskLightVerdict</a> -&gt; <a href="Pos-Delegation.html#t:ConfirmPskLightVerdict">ConfirmPskLightVerdict</a> -&gt; <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ConfirmPskLightVerdict:Show:2" class="instance expander" onclick="toggleSection('i:id:ConfirmPskLightVerdict:Show:2')"></span> <a href="../base-4.9.1.0/Text-Show.html#t:Show">Show</a> <a href="Pos-Delegation.html#t:ConfirmPskLightVerdict">ConfirmPskLightVerdict</a></span> <a href="src/Pos.Delegation.Logic.Mempool.html#line-310" class="link">Source</a> <a href="#t:ConfirmPskLightVerdict" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ConfirmPskLightVerdict:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Pos-Delegation.html#t:ConfirmPskLightVerdict">ConfirmPskLightVerdict</a> -&gt; <a href="../base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Pos-Delegation.html#t:ConfirmPskLightVerdict">ConfirmPskLightVerdict</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Pos-Delegation.html#t:ConfirmPskLightVerdict">ConfirmPskLightVerdict</a>] -&gt; <a href="../base-4.9.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:processConfirmProxySk" class="def">processConfirmProxySk</a> :: (<a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadMask m, Mockable CurrentTime m) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> -&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySigLight">ProxySigLight</a> <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> -&gt; m <a href="Pos-Delegation.html#t:ConfirmPskLightVerdict">ConfirmPskLightVerdict</a> <a href="src/Pos.Delegation.Logic.Mempool.html#processConfirmProxySk" class="link">Source</a> <a href="#v:processConfirmProxySk" class="selflink">#</a></p><div class="doc"><p>Takes a lightweight psk, delegate proof of delivery. Checks if
 it's valid or not. Caches message in any case.</p></div></div><div class="top"><p class="src"><a id="v:isProxySKConfirmed" class="def">isProxySKConfirmed</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadMask m, <a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:ProxySKLight">ProxySKLight</a> -&gt; m <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Pos.Delegation.Logic.Mempool.html#isProxySKConfirmed" class="link">Source</a> <a href="#v:isProxySKConfirmed" class="selflink">#</a></p><div class="doc"><p>Checks if we hold a confirmation for given PSK.</p></div></div><div class="top"><p class="src"><a id="v:dlgVerifyBlocks" class="def">dlgVerifyBlocks</a> :: <span class="keyword">forall</span> ssc ctx m. (<a href="Pos-DB-Block.html#t:MonadBlockDB">MonadBlockDB</a> ssc m, <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadReader ctx m, <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens-39-">HasLens'</a> ctx <a href="../cardano-sl-lrc-1.0.3/Pos-Lrc-Context.html#t:LrcContext">LrcContext</a>, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:OldestFirst">OldestFirst</a> <a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:NE">NE</a> (<a href="Pos-Block-Core.html#t:Block">Block</a> ssc) -&gt; m (<a href="../base-4.9.1.0/Data-Either.html#t:Either">Either</a> Text (<a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:OldestFirst">OldestFirst</a> <a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:NE">NE</a> <a href="Pos-Delegation-Types.html#t:DlgUndo">DlgUndo</a>)) <a href="src/Pos.Delegation.Logic.VAR.html#dlgVerifyBlocks" class="link">Source</a> <a href="#v:dlgVerifyBlocks" class="selflink">#</a></p><div class="doc"><p>Verifies if blocks are correct relatively to the delegation logic
 and returns a non-empty list of proxySKs needed for undoing
 them. Predicate for correctness here is:</p><ul><li>Issuer can post only one cert per epoch</li><li>For every new certificate issuer had enough stake at the
   end of prev. epoch</li><li>Delegation payload plus database state doesn't produce cycles.</li></ul><p>It's assumed blocks are correct from 'Pos.Types.Block#verifyBlocks'
 point of view.</p></div></div><div class="top"><p class="src"><a id="v:dlgApplyBlocks" class="def">dlgApplyBlocks</a> :: <span class="keyword">forall</span> ssc ctx m. (<a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDBRead">MonadDBRead</a> m, WithLogger m, MonadMask m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>, <a href="../cardano-sl-ssc-1.0.3/Pos-Ssc-Class-Helpers.html#t:SscHelpersClass">SscHelpersClass</a> ssc) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:OldestFirst">OldestFirst</a> <a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:NE">NE</a> (<a href="Pos-Block-Types.html#t:Blund">Blund</a> ssc) -&gt; m (<a href="../base-4.9.1.0/Data-List-NonEmpty.html#t:NonEmpty">NonEmpty</a> <a href="../cardano-sl-db-1.0.3/Pos-DB-BatchOp.html#t:SomeBatchOp">SomeBatchOp</a>) <a href="src/Pos.Delegation.Logic.VAR.html#dlgApplyBlocks" class="link">Source</a> <a href="#v:dlgApplyBlocks" class="selflink">#</a></p><div class="doc"><p>Applies a sequence of definitely valid blocks to memory state and
 returns batchops. It works correctly only in case blocks don't
 cross over epoch. So genesis block is either absent or the head.</p></div></div><div class="top"><p class="src"><a id="v:dlgRollbackBlocks" class="def">dlgRollbackBlocks</a> :: <span class="keyword">forall</span> ssc ctx m. (<a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, <a href="Pos-DB-Block.html#t:MonadBlockDB">MonadBlockDB</a> ssc m, WithLogger m) =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:NewestFirst">NewestFirst</a> <a href="../cardano-sl-core-1.0.3/Pos-Util-Chrono.html#t:NE">NE</a> (<a href="Pos-Block-Types.html#t:Blund">Blund</a> ssc) -&gt; m (<a href="../base-4.9.1.0/Data-List-NonEmpty.html#t:NonEmpty">NonEmpty</a> <a href="../cardano-sl-db-1.0.3/Pos-DB-BatchOp.html#t:SomeBatchOp">SomeBatchOp</a>) <a href="src/Pos.Delegation.Logic.VAR.html#dlgRollbackBlocks" class="link">Source</a> <a href="#v:dlgRollbackBlocks" class="selflink">#</a></p><div class="doc"><p>Rollbacks block list. Erases mempool of certificates. Better to
 restore them after the rollback (see Txp#normalizeTxpLD). You can
 rollback arbitrary number of blocks.</p></div></div><div class="top"><p class="src"><a id="v:dlgNormalizeOnRollback" class="def">dlgNormalizeOnRollback</a> :: <span class="keyword">forall</span> ssc ctx m. (<a href="Pos-Delegation.html#t:MonadDelegation">MonadDelegation</a> ctx m, <a href="Pos-DB-Block.html#t:MonadBlockDB">MonadBlockDB</a> ssc m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadGState">MonadGState</a> m, <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadMask m, <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens-39-">HasLens'</a> ctx <a href="../cardano-sl-lrc-1.0.3/Pos-Lrc-Context.html#t:LrcContext">LrcContext</a>, Mockable CurrentTime m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>, <a href="../cardano-sl-ssc-1.0.3/Pos-Ssc-Class-Helpers.html#t:SscHelpersClass">SscHelpersClass</a> ssc) =&gt; m () <a href="src/Pos.Delegation.Logic.VAR.html#dlgNormalizeOnRollback" class="link">Source</a> <a href="#v:dlgNormalizeOnRollback" class="selflink">#</a></p><div class="doc"><p>Normalizes the memory state after the rollback. Must be called
 only when <code>StateLock</code> is taken.</p></div></div><div class="top"><p class="src"><a id="v:delegationLrcConsumer" class="def">delegationLrcConsumer</a> :: (<a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadGState">MonadGState</a> m, <a href="../cardano-sl-db-1.0.3/Pos-DB-Class.html#t:MonadDB">MonadDB</a> m) =&gt; <a href="../cardano-sl-lrc-1.0.3/Pos-Lrc-Consumer.html#t:LrcConsumer">LrcConsumer</a> m <a href="src/Pos.Delegation.Lrc.html#delegationLrcConsumer" class="link">Source</a> <a href="#v:delegationLrcConsumer" class="selflink">#</a></p><div class="doc"><p>Consumer will be called on every Richmen computation.</p></div></div><div class="top"><p class="src">module <a href="Pos-Delegation-Types.html">Pos.Delegation.Types</a></p></div><div class="top"><p class="src"><a id="v:dlgWorkers" class="def">dlgWorkers</a> :: <a href="Pos-WorkMode-Class.html#t:WorkMode">WorkMode</a> ssc ctx m =&gt; ([<a href="../cardano-sl-infra-1.0.3/Pos-Communication-Types-Protocol.html#t:WorkerSpec">WorkerSpec</a> m], <a href="../cardano-sl-infra-1.0.3/Pos-Communication-Types-Protocol.html#t:OutSpecs">OutSpecs</a>) <a href="src/Pos.Delegation.Worker.html#dlgWorkers" class="link">Source</a> <a href="#v:dlgWorkers" class="selflink">#</a></p><div class="doc"><p>All workers specific to proxy sertificates processing.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>