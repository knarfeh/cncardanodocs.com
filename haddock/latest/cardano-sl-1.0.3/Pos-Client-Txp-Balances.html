<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Pos.Client.Txp.Balances</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Pos-Client-Txp-Balances.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Pos.Client.Txp.Balances.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-sl-1.0.3: Cardano SL main implementation</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Pos.Client.Txp.Balances</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">class</span> <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="#t:MonadBalances">MonadBalances</a> m <span class="keyword">where</span><ul class="subs"></ul></li><li class="src short"><a href="#v:getOwnUtxo">getOwnUtxo</a> :: <a href="Pos-Client-Txp-Balances.html#t:MonadBalances">MonadBalances</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Address">Address</a> -&gt; m <a href="../cardano-sl-txp-1.0.3/Pos-Txp-Toil-Types.html#t:Utxo">Utxo</a></li><li class="src short"><a href="#v:getBalanceFromUtxo">getBalanceFromUtxo</a> :: <a href="Pos-Client-Txp-Balances.html#t:MonadBalances">MonadBalances</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Address">Address</a> -&gt; m <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a></li><li class="src short"><a href="#v:getOwnUtxosDefault">getOwnUtxosDefault</a> :: BalancesEnv ext ctx m =&gt; [<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Address">Address</a>] -&gt; m <a href="../cardano-sl-txp-1.0.3/Pos-Txp-Toil-Types.html#t:Utxo">Utxo</a></li><li class="src short"><a href="#v:getBalanceDefault">getBalanceDefault</a> :: BalancesEnv ext ctx m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Address">Address</a> -&gt; m <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a></li><li class="src short"><a href="#v:getOwnUtxoForPk">getOwnUtxoForPk</a> :: <a href="Pos-Client-Txp-Balances.html#t:MonadBalances">MonadBalances</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a> -&gt; m <a href="../cardano-sl-txp-1.0.3/Pos-Txp-Toil-Types.html#t:Utxo">Utxo</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">class</span> <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a id="t:MonadBalances" class="def">MonadBalances</a> m <span class="keyword">where</span> <a href="src/Pos.Client.Txp.Balances.html#MonadBalances" class="link">Source</a> <a href="#t:MonadBalances" class="selflink">#</a></p><div class="doc"><p>A class which have the methods to get state of address' balance</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Pos-Client-Txp-Balances.html#v:getOwnUtxos">getOwnUtxos</a>, <a href="Pos-Client-Txp-Balances.html#v:getBalance">getBalance</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:getOwnUtxos" class="def">getOwnUtxos</a> :: [<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Address">Address</a>] -&gt; m <a href="../cardano-sl-txp-1.0.3/Pos-Txp-Toil-Types.html#t:Utxo">Utxo</a> <a href="src/Pos.Client.Txp.Balances.html#getOwnUtxos" class="link">Source</a> <a href="#v:getOwnUtxos" class="selflink">#</a></p><p class="src"><a id="v:getBalance" class="def">getBalance</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Address">Address</a> -&gt; m <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> <a href="src/Pos.Client.Txp.Balances.html#getBalance" class="link">Source</a> <a href="#v:getBalance" class="selflink">#</a></p></div><div class="subs instances"><p id="control.i:MonadBalances" class="caption collapser" onclick="toggleSection('i:MonadBalances')">Instances</p><div id="section.i:MonadBalances" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:MonadBalances:MonadBalances:1" class="instance expander" onclick="toggleSection('i:ic:MonadBalances:MonadBalances:1')"></span> (<a href="Pos-Client-Txp-Balances.html#t:MonadBalances">MonadBalances</a> m, MonadTrans t, <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> (t m)) =&gt; <a href="Pos-Client-Txp-Balances.html#t:MonadBalances">MonadBalances</a> (t m)</span> <a href="src/Pos.Client.Txp.Balances.html#line-40" class="link">Source</a> <a href="#t:MonadBalances" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:MonadBalances:MonadBalances:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getOwnUtxos">getOwnUtxos</a> :: [<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Address">Address</a>] -&gt; t m <a href="../cardano-sl-txp-1.0.3/Pos-Txp-Toil-Types.html#t:Utxo">Utxo</a> <a href="src/Pos.Client.Txp.Balances.html#getOwnUtxos" class="link">Source</a> <a href="#v:getOwnUtxos" class="selflink">#</a></p><p class="src"><a href="#v:getBalance">getBalance</a> :: <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Address">Address</a> -&gt; t m <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> <a href="src/Pos.Client.Txp.Balances.html#getBalance" class="link">Source</a> <a href="#v:getBalance" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:getOwnUtxo" class="def">getOwnUtxo</a> :: <a href="Pos-Client-Txp-Balances.html#t:MonadBalances">MonadBalances</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Address">Address</a> -&gt; m <a href="../cardano-sl-txp-1.0.3/Pos-Txp-Toil-Types.html#t:Utxo">Utxo</a> <a href="src/Pos.Client.Txp.Balances.html#getOwnUtxo" class="link">Source</a> <a href="#v:getOwnUtxo" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getBalanceFromUtxo" class="def">getBalanceFromUtxo</a> :: <a href="Pos-Client-Txp-Balances.html#t:MonadBalances">MonadBalances</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Address">Address</a> -&gt; m <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> <a href="src/Pos.Client.Txp.Balances.html#getBalanceFromUtxo" class="link">Source</a> <a href="#v:getBalanceFromUtxo" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getOwnUtxosDefault" class="def">getOwnUtxosDefault</a> :: BalancesEnv ext ctx m =&gt; [<a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Address">Address</a>] -&gt; m <a href="../cardano-sl-txp-1.0.3/Pos-Txp-Toil-Types.html#t:Utxo">Utxo</a> <a href="src/Pos.Client.Txp.Balances.html#getOwnUtxosDefault" class="link">Source</a> <a href="#v:getOwnUtxosDefault" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getBalanceDefault" class="def">getBalanceDefault</a> :: BalancesEnv ext ctx m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Address">Address</a> -&gt; m <a href="../cardano-sl-core-1.0.3/Pos-Core-Types.html#t:Coin">Coin</a> <a href="src/Pos.Client.Txp.Balances.html#getBalanceDefault" class="link">Source</a> <a href="#v:getBalanceDefault" class="selflink">#</a></p><div class="doc"><p><code>BalanceDB</code> isn't used here anymore, because
 1) It doesn't represent actual balances of addresses, but it represents _stakes_
 2) Local utxo is now cached, and deriving balances from it is not
    so bad for performance now</p></div></div><div class="top"><p class="src"><a id="v:getOwnUtxoForPk" class="def">getOwnUtxoForPk</a> :: <a href="Pos-Client-Txp-Balances.html#t:MonadBalances">MonadBalances</a> m =&gt; <a href="../cardano-sl-core-1.0.3/Pos-Crypto-Signing-Types-Signing.html#t:PublicKey">PublicKey</a> -&gt; m <a href="../cardano-sl-txp-1.0.3/Pos-Txp-Toil-Types.html#t:Utxo">Utxo</a> <a href="src/Pos.Client.Txp.Balances.html#getOwnUtxoForPk" class="link">Source</a> <a href="#v:getOwnUtxoForPk" class="selflink">#</a></p><div class="doc"><p>Sometimes we want to get utxo for all addresses which we &#171;own&#187;,
 i. e. can spend funds from them. We can't get all such addresses
 from public key, because it's impossible to extract spending data
 from an address. And we can't enumerate all possible addresses for
 a public key. So we only consider two addresses: one with bootstrap
 era distribution and another one with single key distribution.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>