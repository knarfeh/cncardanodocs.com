<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Pos.DB.Rocks.Types</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Pos-DB-Rocks-Types.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Pos.DB.Rocks.Types.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-sl-db-1.0.3: Cardano SL - basic DB interfaces</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Pos.DB.Rocks.Types</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Types related to rocksdb implementation <code>MonadDBRead</code> and
 <code>MonadDB</code>.</p><p><code><a href="Pos-DB-Rocks-Types.html#t:MonadRealDB">MonadRealDB</a></code> is the most featured class (actually just a set of
 constraints) which wraps <code><a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a></code> containing RocksDB
 databases. This class can be used to manipulate RocksDB
 directly. It may be useful when you need an access to advanced
 features of RocksDB.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:MonadRealDB">MonadRealDB</a> ctx m = (MonadReader ctx m, <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens">HasLens</a> <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a> ctx <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a>, <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadBaseControl <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> m, MonadCatch m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:DB">DB</a> = <a href="#v:DB">DB</a> {<ul class="subs"><li><a href="#v:rocksReadOpts">rocksReadOpts</a> :: !ReadOptions</li><li><a href="#v:rocksWriteOpts">rocksWriteOpts</a> :: !WriteOptions</li><li><a href="#v:rocksOptions">rocksOptions</a> :: !Options</li><li><a href="#v:rocksDB">rocksDB</a> :: !DB</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:NodeDBs">NodeDBs</a> = <a href="#v:NodeDBs">NodeDBs</a> {<ul class="subs"><li><a href="#v:_blockIndexDB">_blockIndexDB</a> :: !<a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></li><li><a href="#v:_blockDataDir">_blockDataDir</a> :: !<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a></li><li><a href="#v:_gStateDB">_gStateDB</a> :: !<a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></li><li><a href="#v:_lrcDB">_lrcDB</a> :: !<a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></li><li><a href="#v:_miscDB">_miscDB</a> :: !<a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></li><li><a href="#v:_miscLock">_miscLock</a> :: !<a href="../cardano-sl-core-1.0.3/Pos-Util-Concurrent-RWLock.html#t:RWLock">RWLock</a></li></ul>}</li><li class="src short"><a href="#v:blockIndexDB">blockIndexDB</a> :: Lens' <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a> <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></li><li class="src short"><a href="#v:blockDataDir">blockDataDir</a> :: Lens' <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a> <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a></li><li class="src short"><a href="#v:gStateDB">gStateDB</a> :: Lens' <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a> <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></li><li class="src short"><a href="#v:lrcDB">lrcDB</a> :: Lens' <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a> <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></li><li class="src short"><a href="#v:miscDB">miscDB</a> :: Lens' <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a> <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></li><li class="src short"><a href="#v:miscLock">miscLock</a> :: Lens' <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a> <a href="../cardano-sl-core-1.0.3/Pos-Util-Concurrent-RWLock.html#t:RWLock">RWLock</a></li><li class="src short"><a href="#v:getDBByTag">getDBByTag</a> :: <a href="Pos-DB-Rocks-Types.html#t:MonadRealDB">MonadRealDB</a> ctx m =&gt; <a href="Pos-DB-Class.html#t:DBTag">DBTag</a> -&gt; m <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></li><li class="src short"><a href="#v:getNodeDBs">getNodeDBs</a> :: <a href="Pos-DB-Rocks-Types.html#t:MonadRealDB">MonadRealDB</a> ctx m =&gt; m <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a></li><li class="src short"><a href="#v:getBlockIndexDB">getBlockIndexDB</a> :: <a href="Pos-DB-Rocks-Types.html#t:MonadRealDB">MonadRealDB</a> ctx m =&gt; m <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></li><li class="src short"><a href="#v:getGStateDB">getGStateDB</a> :: <a href="Pos-DB-Rocks-Types.html#t:MonadRealDB">MonadRealDB</a> ctx m =&gt; m <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></li><li class="src short"><a href="#v:getLrcDB">getLrcDB</a> :: <a href="Pos-DB-Rocks-Types.html#t:MonadRealDB">MonadRealDB</a> ctx m =&gt; m <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></li><li class="src short"><a href="#v:getMiscDB">getMiscDB</a> :: <a href="Pos-DB-Rocks-Types.html#t:MonadRealDB">MonadRealDB</a> ctx m =&gt; m <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MonadRealDB" class="def">MonadRealDB</a> ctx m = (MonadReader ctx m, <a href="../cardano-sl-core-1.0.3/Pos-Util-Util.html#t:HasLens">HasLens</a> <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a> ctx <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a>, <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, MonadBaseControl <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> m, MonadCatch m, <a href="../cardano-sl-core-1.0.3/Pos-Core-Configuration.html#t:HasConfiguration">HasConfiguration</a>) <a href="src/Pos.DB.Rocks.Types.html#MonadRealDB" class="link">Source</a> <a href="#t:MonadRealDB" class="selflink">#</a></p><div class="doc"><p>This is the set of constraints necessary to operate on &#171;real&#187; DBs
 (which are wrapped into <code><a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a></code>).  Apart from providing access to
 <code><a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a></code> it also has <code><a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a></code> constraint, because it's impossible
 to use real DB without IO. Finally, it has <code>MonadCatch</code> constraints
 (partially for historical reasons, partially for good ones).</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DB" class="def">DB</a> <a href="src/Pos.DB.Rocks.Types.html#DB" class="link">Source</a> <a href="#t:DB" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DB" class="def">DB</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:rocksReadOpts" class="def">rocksReadOpts</a> :: !ReadOptions</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:rocksWriteOpts" class="def">rocksWriteOpts</a> :: !WriteOptions</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:rocksOptions" class="def">rocksOptions</a> :: !Options</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:rocksDB" class="def">rocksDB</a> :: !DB</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:NodeDBs" class="def">NodeDBs</a> <a href="src/Pos.DB.Rocks.Types.html#NodeDBs" class="link">Source</a> <a href="#t:NodeDBs" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NodeDBs" class="def">NodeDBs</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:_blockIndexDB" class="def">_blockIndexDB</a> :: !<a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></dfn><div class="doc"><p>Block index.</p></div></li><li><dfn class="src"><a id="v:_blockDataDir" class="def">_blockDataDir</a> :: !<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a></dfn><div class="doc"><p>Block and undo files.</p></div></li><li><dfn class="src"><a id="v:_gStateDB" class="def">_gStateDB</a> :: !<a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></dfn><div class="doc"><p>Global state corresponding to some tip.</p></div></li><li><dfn class="src"><a id="v:_lrcDB" class="def">_lrcDB</a> :: !<a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></dfn><div class="doc"><p>Data computed by LRC.</p></div></li><li><dfn class="src"><a id="v:_miscDB" class="def">_miscDB</a> :: !<a href="Pos-DB-Rocks-Types.html#t:DB">DB</a></dfn><div class="doc"><p>Everything small and insignificant</p></div></li><li><dfn class="src"><a id="v:_miscLock" class="def">_miscLock</a> :: !<a href="../cardano-sl-core-1.0.3/Pos-Util-Concurrent-RWLock.html#t:RWLock">RWLock</a></dfn><div class="doc"><p>Lock on misc db</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:blockIndexDB" class="def">blockIndexDB</a> :: Lens' <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a> <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a> <a href="src/Pos.DB.Rocks.Types.html#blockIndexDB" class="link">Source</a> <a href="#v:blockIndexDB" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:blockDataDir" class="def">blockDataDir</a> :: Lens' <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a> <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a> <a href="src/Pos.DB.Rocks.Types.html#blockDataDir" class="link">Source</a> <a href="#v:blockDataDir" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:gStateDB" class="def">gStateDB</a> :: Lens' <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a> <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a> <a href="src/Pos.DB.Rocks.Types.html#gStateDB" class="link">Source</a> <a href="#v:gStateDB" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lrcDB" class="def">lrcDB</a> :: Lens' <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a> <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a> <a href="src/Pos.DB.Rocks.Types.html#lrcDB" class="link">Source</a> <a href="#v:lrcDB" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:miscDB" class="def">miscDB</a> :: Lens' <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a> <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a> <a href="src/Pos.DB.Rocks.Types.html#miscDB" class="link">Source</a> <a href="#v:miscDB" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:miscLock" class="def">miscLock</a> :: Lens' <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a> <a href="../cardano-sl-core-1.0.3/Pos-Util-Concurrent-RWLock.html#t:RWLock">RWLock</a> <a href="src/Pos.DB.Rocks.Types.html#miscLock" class="link">Source</a> <a href="#v:miscLock" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getDBByTag" class="def">getDBByTag</a> :: <a href="Pos-DB-Rocks-Types.html#t:MonadRealDB">MonadRealDB</a> ctx m =&gt; <a href="Pos-DB-Class.html#t:DBTag">DBTag</a> -&gt; m <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a> <a href="src/Pos.DB.Rocks.Types.html#getDBByTag" class="link">Source</a> <a href="#v:getDBByTag" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getNodeDBs" class="def">getNodeDBs</a> :: <a href="Pos-DB-Rocks-Types.html#t:MonadRealDB">MonadRealDB</a> ctx m =&gt; m <a href="Pos-DB-Rocks-Types.html#t:NodeDBs">NodeDBs</a> <a href="src/Pos.DB.Rocks.Types.html#getNodeDBs" class="link">Source</a> <a href="#v:getNodeDBs" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getBlockIndexDB" class="def">getBlockIndexDB</a> :: <a href="Pos-DB-Rocks-Types.html#t:MonadRealDB">MonadRealDB</a> ctx m =&gt; m <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a> <a href="src/Pos.DB.Rocks.Types.html#getBlockIndexDB" class="link">Source</a> <a href="#v:getBlockIndexDB" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getGStateDB" class="def">getGStateDB</a> :: <a href="Pos-DB-Rocks-Types.html#t:MonadRealDB">MonadRealDB</a> ctx m =&gt; m <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a> <a href="src/Pos.DB.Rocks.Types.html#getGStateDB" class="link">Source</a> <a href="#v:getGStateDB" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getLrcDB" class="def">getLrcDB</a> :: <a href="Pos-DB-Rocks-Types.html#t:MonadRealDB">MonadRealDB</a> ctx m =&gt; m <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a> <a href="src/Pos.DB.Rocks.Types.html#getLrcDB" class="link">Source</a> <a href="#v:getLrcDB" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getMiscDB" class="def">getMiscDB</a> :: <a href="Pos-DB-Rocks-Types.html#t:MonadRealDB">MonadRealDB</a> ctx m =&gt; m <a href="Pos-DB-Rocks-Types.html#t:DB">DB</a> <a href="src/Pos.DB.Rocks.Types.html#getMiscDB" class="link">Source</a> <a href="#v:getMiscDB" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>